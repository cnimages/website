


<!DOCTYPE html>
<html lang="en-US">
<head>
<meta charset="utf-8">
<title>Monitoring Kubernetes Control Plane using KubeSphere</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="description" content="KubeSphere leverages tools including Prometheus, Kube-state-metrics Node-exporter, ServiceMonitor, as well as the predefined rules in PrometheusRule, providing the monitoring metrics from application to infrastructure out of box.">
<meta name="keywords" content="Kubernetes, KubeSphere, Monitoring, Prometheus">

<meta property="og:type" content="article"/>
<meta property="og:title" content="Monitoring Kubernetes Control Plane using KubeSphere"/>
<meta property="og:description" content="KubeSphere leverages tools including Prometheus, Kube-state-metrics Node-exporter, ServiceMonitor, as well as the predefined rules in PrometheusRule, providing the monitoring metrics from application to infrastructure out of box."/>
<meta property="og:image" content="https://pek3b.qingstor.com/kubesphere-docs/png/20200328170549.png"/>
<meta property="og:url" content="https://cnimages.github.io/website/blogs/monitoring-k8s-control-plane/"/>

<meta name="docsearch:language" content="en-US" /><link rel="stylesheet" href="/fonts/Roboto/stylesheet.css">
<link rel="stylesheet" href="/fonts/ProximaNova/stylesheet.css">
<link rel="stylesheet" href="/css/jquery.modal.min.css">
<link rel="stylesheet" href="/css/viewer.min.css">


<link rel="stylesheet" href="/website/scss/common.min.fd2f2584615728a729ee87ecf658d2f2e62d4c55dc6ca4c90029116aa21ee2e8.css">











<script src='/website/js/jquery-3.5.0.min.js'></script>
<script src='/website/js/viewer.min.js'></script>
<script src='/website/js/jquery.modal.min.js'></script>










<script type='text/javascript'>
!function(e,t,n,g,i){e[i]=e[i]||function(){(e[i].q=e[i].q||[]).push(arguments)},n=t.createElement("script"),tag=t.getElementsByTagName("script")[0],n.async=1,n.src=('https:'==document.location.protocol?'https://':'http://')+g,tag.parentNode.insertBefore(n,tag)}(window,document,"script","assets.giocdn.com/2.1/gio.js","gio");
  gio('init', '8a24ae300cbf8b8c', {});
  
  
  gio('send');
</script>





    <link rel="stylesheet" href="/website/scss/content.min.cd01785de7a83de330d32ac3aef7e5f4e0aa8c5e62c21008e4779016e3fd9517.css">
    
    
    <link rel="stylesheet" href="/website/scss/markdown.min.0de31cde2c91847e0e6c6f43d52658e6347b056a9da347546c21a7786900bfcf.css">
</head>


<body>
   
  
<header class="navigation">
    
    <div class="common-layout">
        <div class="header-container">
            <a href="/website/">
                <img src="/images/header/logo.svg" alt="" class="logo">
            </a>

            <ul class="nav">
                
                
                

                
                
                    
                
                    
                
                    
                

                <li  class="menu-li" >
                    <span class='menu-span'>Scenarios</span>
                    <ul class="dropdown-menu menu-2">
                        
                        <li >
                            
                            <a href="/website/devops/">Embracing One-stop DevOps Workflow</a>
                            
                        </li>
                        
                        <li >
                            
                            <a href="/website/service-mesh/">Running Microservices on Kubernetes</a>
                            
                        </li>
                        
                        <li >
                            
                            <a href="/website/observability/">Building Cloud Native Observability</a>
                            
                        </li>
                        
                    </ul>
                </li>
                

                
                

                
                
                    
                
                    
                
                    
                
                    
                

                <li  class="menu-li" >
                    <span class='menu-span'>Resources</span>
                    <ul class="dropdown-menu menu-3">
                        
                        <li >
                            
                            <a href="/website/projects/">Open Source Projects</a>
                            
                        </li>
                        
                        <li >
                            
                            <a href="/website/conferences/">KubeCon & QCon</a>
                            
                        </li>
                        
                        <li >
                            
                            <a href="/website/blogs/">Technology Blogs</a>
                            
                        </li>
                        
                        <li >
                            
                            <a href="/website/videos/">Video Resources</a>
                            
                        </li>
                        
                    </ul>
                </li>
                

                
                

                
                
                    
                
                    
                
                    
                
                    
                

                <li  class="menu-li" >
                    <span class='menu-span'>Documentation</span>
                    <ul class="dropdown-menu menu-4">
                        
                        <li >
                            
                            <a href="/website/docs/">v3.0.0 <img src='/images/header/star.svg' alt='star'></a>
                            
                        </li>
                        
                        <li >
                            
                            <a href="https://v2-1.docs.kubesphere.io/docs" target="_blank" rel="noopener noreferrer">v2.1.x</a>
                            
                        </li>
                        
                        <li >
                            
                            <a href="https://v2-0.docs.kubesphere.io/docs/" target="_blank" rel="noopener noreferrer">v2.0.x</a>
                            
                        </li>
                        
                        <li >
                            
                            <a href="https://v1-0.docs.kubesphere.io/docs/" target="_blank" rel="noopener noreferrer">v1.0.0</a>
                            
                        </li>
                        
                    </ul>
                </li>
                

                
                

                
                
                    
                
                    
                
                    
                
                    
                
                    
                

                <li  class="menu-li" >
                    <span class='menu-span'>Community</span>
                    <ul class="dropdown-menu menu-5">
                        
                        <li >
                            
                            <a href="/website/contribution/">Contribution</a>
                            
                        </li>
                        
                        <li >
                            
                            <a href="/website/case/">Case Studies</a>
                            
                        </li>
                        
                        <li >
                            
                            <a href="/website/partner/">Partner</a>
                            
                        </li>
                        
                        <li >
                            
                            <a href="/website/news/">News</a>
                            
                        </li>
                        
                        <li >
                            
                            <a href="https://github.com/cnimages/kubesphere/blob/master/docs/roadmap.md" target="_blank" rel="noopener noreferrer">RoadMap</a>
                            
                        </li>
                        
                    </ul>
                </li>
                

                

            </ul>
            <div class="right-menu">
                <ul>
                    <li class="language-menu">
                        <div>
                            <img src="/images/header/black.svg" alt="">
                            <span>English</span>
                        </div>
                        
                        <ul class="dropdown-menu">
                            
                            <li onclick="location = '\/website\/blogs\/monitoring-k8s-control-plane\/'">English</li>
                            
                        </ul>
                        
                    </li>
                    <li class='btn-li'>
                        <a href="https://demo.kubesphere.io/login" target="_blank" rel="noopener noreferrer">
                            <button class="demo-btn">Demo →</button>
                        </a>
                        <ol class="dropdown-menu">
                            <li>1.Experience account: demo1 / Demo123</li>
                            <li>2.This account is only allowed to view parts of UI</li>
                            <li>3.It&#39;s recommended that install KubeSphere in your environment</li>
                        </ol>
                    </li>
                    <li class='link-li'>
                        <a class='link-1' href="https://join.slack.com/t/kubesphere/shared_invite/enQtNTE3MDIxNzUxNzQ0LTZkNTdkYWNiYTVkMTM5ZThhODY1MjAyZmVlYWEwZmQ3ODQ1NmM1MGVkNWEzZTRhNzk0MzM5MmY4NDc3ZWVhMjE" target="_blank" rel="noopener noreferrer"></a>
                        <a class='link-2' href="https://twitter.com/KubeSphere" target="_blank" rel="noopener noreferrer"></a>
                        <a class='link-3' href="https://github.com/cnimages/kubesphere" target="_blank" rel="noopener noreferrer"></a>
                    </li>
                    <li class="menu-icon">
                        <img src="/images/header/menu.svg" alt="">
                    </li>
                </ul>
            </div>
        </div>
    </div>

    <div id="modal-for-menu" class="modal">
        <ul class="nav">
            
            
            

            
            
                
            
                
            
                
            

            <li data-check="0"  class="menu-li" >
                <span class='menu-span'>Scenarios</span>
                <ul class="dropdown-menu">
                    
                    <li >
                        <a href="/website/devops/">Embracing One-stop DevOps Workflow</a>
                    </li>
                    
                    <li >
                        <a href="/website/service-mesh/">Running Microservices on Kubernetes</a>
                    </li>
                    
                    <li >
                        <a href="/website/observability/">Building Cloud Native Observability</a>
                    </li>
                    
                </ul>
            </li>
            

            
            

            
            
                
            
                
            
                
            
                
            

            <li data-check="0"  class="menu-li" >
                <span class='menu-span'>Resources</span>
                <ul class="dropdown-menu">
                    
                    <li >
                        <a href="/website/projects/">Open Source Projects</a>
                    </li>
                    
                    <li >
                        <a href="/website/conferences/">KubeCon & QCon</a>
                    </li>
                    
                    <li >
                        <a href="/website/blogs/">Technology Blogs</a>
                    </li>
                    
                    <li >
                        <a href="/website/videos/">Video Resources</a>
                    </li>
                    
                </ul>
            </li>
            

            
            

            
            
                
            
                
            
                
            
                
            

            <li data-check="0"  class="menu-li" >
                <span class='menu-span'>Documentation</span>
                <ul class="dropdown-menu">
                    
                    <li >
                        <a href="/website/docs/">v3.0.0 <img src='/images/header/star.svg' alt='star'></a>
                    </li>
                    
                    <li >
                        <a href="https://v2-1.docs.kubesphere.io/docs">v2.1.x</a>
                    </li>
                    
                    <li >
                        <a href="https://v2-0.docs.kubesphere.io/docs/">v2.0.x</a>
                    </li>
                    
                    <li >
                        <a href="https://v1-0.docs.kubesphere.io/docs/">v1.0.0</a>
                    </li>
                    
                </ul>
            </li>
            

            
            

            
            
                
            
                
            
                
            
                
            
                
            

            <li data-check="0"  class="menu-li" >
                <span class='menu-span'>Community</span>
                <ul class="dropdown-menu">
                    
                    <li >
                        <a href="/website/contribution/">Contribution</a>
                    </li>
                    
                    <li >
                        <a href="/website/case/">Case Studies</a>
                    </li>
                    
                    <li >
                        <a href="/website/partner/">Partner</a>
                    </li>
                    
                    <li >
                        <a href="/website/news/">News</a>
                    </li>
                    
                    <li >
                        <a href="https://github.com/cnimages/kubesphere/blob/master/docs/roadmap.md">RoadMap</a>
                    </li>
                    
                </ul>
            </li>
            

            

        </ul>
        <div class="btn-div">
            <a href="https://demo.kubesphere.io/login" target="_blank" rel="noopener noreferrer">
                <button class="demo-btn">Demo →</button>
            </a>
        </div>
        <div class="link-div">
            <a href="https://join.slack.com/t/kubesphere/shared_invite/enQtNTE3MDIxNzUxNzQ0LTZkNTdkYWNiYTVkMTM5ZThhODY1MjAyZmVlYWEwZmQ3ODQ1NmM1MGVkNWEzZTRhNzk0MzM5MmY4NDc3ZWVhMjE" target="_blank" rel="noopener noreferrer">
                <img src="/images/header/slack-hover.svg" alt="">
            </a>
            <a href="https://twitter.com/KubeSphere" target="_blank" rel="noopener noreferrer">
                <img src="/images/header/twitter-hover.svg" alt="">
            </a>
            <a href="https://github.com/cnimages/kubesphere" target="_blank" rel="noopener noreferrer">
                <img src="/images/header/github-hover.svg" alt="">
            </a>
        </div>
    </div>
</header>
<script>
var bindNavMouseEvent = function(selector) {
    var flag = false
    $(selector).mouseenter(function() {
        if (flag) {
            return false
        }
        flag = true
        $(this).find('.dropdown-menu').fadeIn(200, function() {
            flag = false
        })
    });
    $(selector).mouseleave(function() {
        $(this).find('.dropdown-menu').fadeOut(200)
    });
}

var bindScrollChangeHeader = function() {
    var check = 100
    var header = $('header')
    window.addEventListener('scroll', function() {
        var scrollY = window.scrollY;
        if (scrollY > 100) {
            header.addClass('navigationScroll')
        } else {
            header.removeClass('navigationScroll')
        }
    })
}

var bindClickShowMenu = function() {
    $('.menu-icon').click(function() {
        $('#modal-for-menu').modal()
    })
}

var bindClickModalLi = function() {
    $('.modal .menu-li').click(function() {
        var check = $(this).data('check')
        if (check === 0) {
            $(this).data('check', 1)
            $(this).find('.dropdown-menu').slideDown(200)
        } else {
            $(this).data('check', 0)
            $(this).find('.dropdown-menu').slideUp(200)
        }
        $(this).find('.menu-span').toggleClass('up')
    })
}

var bindClickClose = function() {
    $('#close-join').click(function() {
        $('.navigation .join-div').hide()
        $('.main-section').removeClass('padding')
    })
}

var language = 'en'

bindClickClose()

bindScrollChangeHeader()

bindNavMouseEvent('.header-container .menu-li')
bindNavMouseEvent('.header-container .language-menu')
bindNavMouseEvent('.header-container .btn-li')

bindClickShowMenu()
bindClickModalLi()


</script>

  <section class="main-section ">
      <div class="common-layout">
          <div class='breadcrumb'>
              
              <span><a href='/website/blogs'>Technology Blogs</a> > </span>
              <span>Monitoring Kubernetes Control Plane using KubeSphere</span>
          </div>
          <div class='main-div middle-div'>
              <div class='author'>Feynman, Guangzhe</div>
              <div class='date'>Published on：2020-03-28</div>
              <h1>Monitoring Kubernetes Control Plane using KubeSphere</h1>
              <div class="share-1">
                  <div class="share">
  <a href="http://twitter.com/share?url=https%3a%2f%2fcnimages.github.io%2fwebsite%2fblogs%2fmonitoring-k8s-control-plane%2f&text=Monitoring%20Kubernetes%20Control%20Plane%20using%20KubeSphere" target="_blank" rel="noopener noreferrer">
    <img src="/images/share/Twitter.svg" alt="twitter icon">
  </a>
  <a href="http://reddit.com/submit?url=https%3a%2f%2fcnimages.github.io%2fwebsite%2fblogs%2fmonitoring-k8s-control-plane%2f&title=Monitoring%20Kubernetes%20Control%20Plane%20using%20KubeSphere" target="_blank" rel="noopener noreferrer">
    <img src="/images/share/Reddit.svg" alt="reddit icon">
  </a>
  <a href="http://www.facebook.com/sharer.php?u=https%3a%2f%2fcnimages.github.io%2fwebsite%2fblogs%2fmonitoring-k8s-control-plane%2f" target="_blank" rel="noopener noreferrer">
    <img src="/images/share/Facebook.svg" alt="facebook icon">
  </a>
  <a href="http://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2fcnimages.github.io%2fwebsite%2fblogs%2fmonitoring-k8s-control-plane%2f" target="_blank" rel="noopener noreferrer">
    <img src="/images/share/Linkedin.svg" alt="linkedin icon">
  </a>
  <a href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2fcnimages.github.io%2fwebsite%2fblogs%2fmonitoring-k8s-control-plane%2f&t=Monitoring%20Kubernetes%20Control%20Plane%20using%20KubeSphere" target="_blank" rel="noopener noreferrer">
    <img src="/images/share/HackerNews.svg" alt="hackernews icon">
  </a>
</div>
              </div>
              <div class='content'>
                  <div class='md-body'>
                      <h2 id="introduction-to-kubernetes-control-plane">Introduction to Kubernetes Control Plane</h2>
<p>In a Kubernetes cluster, there are two machines roles including master nodes and worker nodes. The master node runs the Kubernetes control plane, which is responsible for the management of the worker nodes, makes scheduling decisions, and implements changes to drive the cluster to a desired state. The worker nodes, as the name implies, they run the workloads and Pod on them.</p>
<p><img src="https://pek3b.qingstor.com/kubesphere-docs/png/20200328170549.png" alt=""></p>
<p>As is shown in the graph, there are four components running in the Kubernetes control plane, each of them is critical for running a healthy Kubernetes cluster, they act as the different roles within the cluster:</p>
<ul>
<li><strong>kube-apiserver</strong>: a component of the Kubernetes control plane that exposes the Kubernetes API. The API server is the front end for the Kubernetes control plane.</li>
<li><strong>etcd</strong>: Consistent and highly-available key value store used as Kubernetes’ backing store for all cluster data.</li>
<li><strong>kube-scheduler</strong>: watches for newly created Pods with no assigned node, and selects a node for them to run on.</li>
<li><strong>kube-controller-manager</strong>: watches the state of the cluster through API server watch feature and makes changes to move cluster towards the desired state.</li>
</ul>
<h2 id="why-monitoring-control-plane">Why Monitoring Control Plane</h2>
<p>To keep high reliability of the Kubernetes cluster, monitoring the components of the control plane allows cluster administrator to more rapidly diagnose the scheduling and orchestration issues that occur in the cluster. Thus, we need to collect the metrics of control plane to visualize the real-time data, and digs deeper into the state and performance of each control plane component.</p>
<h2 id="tools-to-control-plane-monitoring">Tools to Control Plane Monitoring</h2>
<p>There is no denying that Prometheus a leading open-source monitoring solution. Plus Grafana dashboard, it could be a perfect tools combination solution to monitor the Kubernetes control plane component. But both of them are a little bit complicated to quickly set up and collect the target metrics into a unified monitoring dashboard.</p>
<p>Fortunately, <a href="https://github.com/kubesphere/kubesphere" target="_blank" rel="noopener noreferrer">KubeSphere</a> leverages those tools including Prometheus, Kube-state-metrics Node-exporter, ServiceMonitor, as well as the predefined rules in PrometheusRule, <strong>providing the monitoring metrics from application to infrastructure out of box</strong>.</p>
<p><img src="https://pek3b.qingstor.com/kubesphere-docs/png/20200328183733.png" alt=""></p>
<h2 id="metrics-in-kubesphere">Metrics in KubeSphere</h2>
<p>To effectively monitor the control plane components, visibility of each component health and state is critical. You can install KubeSphere to easily get the whole insight of the control plane components monitoring, and displays the time-series data.</p>
<h3 id="key-metrics-of-api-server">Key metrics of API Server</h3>
<ul>
<li><code>apiserver_request_by_verb_latencies</code>(ms): Response latency distribution in microseconds for each verb, resource and subresource.</li>
<li><code>apiserver_request_rate</code> (times/s): Rate of apiserver requests</li>
</ul>
<p><img src="https://pek3b.qingstor.com/kubesphere-docs/png/20200328194749.png" alt="Kubernetes API Server Monitoring"></p>
<h3 id="key-metrics-of-etcd">Key metrics of Etcd</h3>
<ul>
<li><code>has_leader</code>: Whether or not a leader exists.</li>
<li><code>etcd_mvcc_db_size</code> (MiB): Total size of the underlying database in bytes.</li>
<li><code>client_grpc_sent/received_bytes_total</code> (MB/s): Including the total number of bytes sent and received to grpc clients.</li>
<li><code>etcd_grpc_server_msg_sent/received_rate</code>: Total number of gRPC stream messages received on and sent by the server.</li>
<li><code>etcd_disk_wal_fsync_duration (ms)</code>: The latency distributions of fsync called by wal.</li>
<li><code>etcd_disk_backend_commit_duration</code> (ms): Describe your disk write performance.</li>
<li><code>Raft Proposals</code> (times/s): The raft protocol ensures that the proposals are applied correctly to the cluster, including metrics as follows:
<ul>
<li><code>etcd_server_proposals_committed_total</code></li>
<li><code>etcd_server_proposals_applied_total</code></li>
<li><code>etcd_server_proposals_pending</code></li>
<li><code>etcd_server_proposals_failed_total</code></li>
</ul>
</li>
</ul>
<p><img src="https://pek3b.qingstor.com/kubesphere-docs/png/20200328194859.png" alt="Etcd Monitoring Metrics"></p>
<h3 id="key-metrics-of-kube-scheduler">Key metrics of kube-scheduler</h3>
<ul>
<li><code>scheduler_schedule_attempts</code>: Difference of the number of attempts to schedule pods, by the result. unschedulable means a pod could not be scheduled, while error means an internal scheduler problem.</li>
<li><code>scheduler_schedule_attempt_rate</code>: Rate of the number of attempts to schedule pods, by the result. unschedulable means a pod could not be scheduled, while error means an internal scheduler problem.</li>
<li><code>scheduler_e2e_scheduling_latency</code>: The end-to-end scheduling latency, which is the sum of the scheduling algorithm latency and the binding latency.</li>
</ul>
<p><img src="https://pek3b.qingstor.com/kubesphere-docs/png/20200328195139.png" alt=""></p>
<h2 id="how-to-install-kubesphere">How to Install KubeSphere</h2>
<p><a href="https://github.com/kubesphere/kubesphere" target="_blank" rel="noopener noreferrer">KubeSphere</a> is a distributed operating system providing cloud native stack with Kubernetes as its kernel, and offers rich observability from application to infrastructure. KubeSphere supports installing on cloud-hosted and on-premises Kubernetes cluster, or <a href="https://kubesphere.io/docs/installation/intro/" target="_blank" rel="noopener noreferrer">installing on Linux machines</a>. This guide only walk you through the installation on existing Kubernetes cluster.</p>
<h3 id="prerequisites">Prerequisites</h3>
<ul>
<li><code>Kubernetes version</code>： <code>1.15.x, 1.16.x, 1.17.x</code></li>
<li><code>Helm version</code> &gt;= <code>2.10.0</code> and &lt; <code>3.0</code>，see <a href="https://devopscube.com/install-configure-helm-kubernetes/" target="_blank" rel="noopener noreferrer">Install and Configure Helm in Kubernetes</a>; KubeSphere 3.0 will support Helm 3.0.</li>
<li>A default Storage Class in your Kubernetes cluster is configured; use <code>kubectl get sc</code> to verify it.</li>
<li>Available resource CPU &gt;= 1 Core and memory &gt;= 2G</li>
<li>The CSR signing feature is activated in kube-apiserver, see <a href="https://github.com/kubesphere/kubesphere/issues/1925#issuecomment-591698309" target="_blank" rel="noopener noreferrer">RKE installation issue</a>.</li>
</ul>
<h2 id="deploy-kubesphere">Deploy KubeSphere</h2>
<blockquote>
<p>No internet access? Refer to <a href="https://kubesphere.io/docs/installation/install-on-k8s-airgapped/" target="_blank" rel="noopener noreferrer">Air-gapped Installation</a> for instructions on how to use your own private registry to install KubeSphere.</p>
</blockquote>
<p>Install KubeSphere using kubectl, assuming your cluster has internet access.</p>
<ul>
<li>If there are 1 Core and 2 GB RAM available in your cluster, use the command below to trigger a default minimal installation only:</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">kubectl apply -f https://raw.githubusercontent.com/kubesphere/ks-installer/master/kubesphere-minimal.yaml
</code></pre></div><ul>
<li>If there are 8 Cores and 16 GB RAM available in your cluster, use the command below to install a complete KubeSphere, i.e. with all components enabled:</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">kubectl apply -f https://raw.githubusercontent.com/kubesphere/ks-installer/master/kubesphere-complete-setup.yaml
</code></pre></div><p>Verify the real-time logs. When you see the following outputs, congratulation! You can access KubeSphere console in your browser now.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ kubectl logs -n kubesphere-system <span style="color:#66d9ef">$(</span>kubectl get pod -n kubesphere-system -l app<span style="color:#f92672">=</span>ks-install -o jsonpath<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;{.items[0].metadata.name}&#39;</span><span style="color:#66d9ef">)</span> -f

<span style="color:#75715e">#####################################################</span>
<span style="color:#75715e">###              Welcome to KubeSphere!           ###</span>
<span style="color:#75715e">#####################################################</span>
Console: http://10.128.0.34:30880
Account: admin
Password: P@88w0rd

NOTE：Please modify the default password after login.
<span style="color:#75715e">#####################################################</span>
</code></pre></div><p><img src="https://pek3b.qingstor.com/kubesphere-docs/png/20200329101752.png" alt=""></p>

                  </div>
              </div>
              <div class="share-2">
                  <div class="share">
  <a href="http://twitter.com/share?url=https%3a%2f%2fcnimages.github.io%2fwebsite%2fblogs%2fmonitoring-k8s-control-plane%2f&text=Monitoring%20Kubernetes%20Control%20Plane%20using%20KubeSphere" target="_blank" rel="noopener noreferrer">
    <img src="/images/share/Twitter.svg" alt="twitter icon">
  </a>
  <a href="http://reddit.com/submit?url=https%3a%2f%2fcnimages.github.io%2fwebsite%2fblogs%2fmonitoring-k8s-control-plane%2f&title=Monitoring%20Kubernetes%20Control%20Plane%20using%20KubeSphere" target="_blank" rel="noopener noreferrer">
    <img src="/images/share/Reddit.svg" alt="reddit icon">
  </a>
  <a href="http://www.facebook.com/sharer.php?u=https%3a%2f%2fcnimages.github.io%2fwebsite%2fblogs%2fmonitoring-k8s-control-plane%2f" target="_blank" rel="noopener noreferrer">
    <img src="/images/share/Facebook.svg" alt="facebook icon">
  </a>
  <a href="http://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2fcnimages.github.io%2fwebsite%2fblogs%2fmonitoring-k8s-control-plane%2f" target="_blank" rel="noopener noreferrer">
    <img src="/images/share/Linkedin.svg" alt="linkedin icon">
  </a>
  <a href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2fcnimages.github.io%2fwebsite%2fblogs%2fmonitoring-k8s-control-plane%2f&t=Monitoring%20Kubernetes%20Control%20Plane%20using%20KubeSphere" target="_blank" rel="noopener noreferrer">
    <img src="/images/share/HackerNews.svg" alt="hackernews icon">
  </a>
</div>
              </div>
          </div>
          <div class='aside'>
              <div class="inner-div">
                <div class='title'>Table of Contents</div>
                <div class='tabs'><nav id="TableOfContents">
  <ul>
    <li><a href="#introduction-to-kubernetes-control-plane">Introduction to Kubernetes Control Plane</a></li>
    <li><a href="#why-monitoring-control-plane">Why Monitoring Control Plane</a></li>
    <li><a href="#tools-to-control-plane-monitoring">Tools to Control Plane Monitoring</a></li>
    <li><a href="#metrics-in-kubesphere">Metrics in KubeSphere</a>
      <ul>
        <li><a href="#key-metrics-of-api-server">Key metrics of API Server</a></li>
        <li><a href="#key-metrics-of-etcd">Key metrics of Etcd</a></li>
        <li><a href="#key-metrics-of-kube-scheduler">Key metrics of kube-scheduler</a></li>
      </ul>
    </li>
    <li><a href="#how-to-install-kubesphere">How to Install KubeSphere</a>
      <ul>
        <li><a href="#prerequisites">Prerequisites</a></li>
      </ul>
    </li>
    <li><a href="#deploy-kubesphere">Deploy KubeSphere</a></li>
  </ul>
</nav></div>
              </div>
          </div>
      </div>
  </section>
  <footer>
    
    <div class="footer">
        <div class="footer-main common-layout">
            <div class="up-main">
                <div class="left-div">
                    <img src="/website/images/logo.svg" alt="" class="foot-logo">
                    <p>Receive the latest news, articles and updates from KubeSphere</p>
                    <div>
                        <form
                            action="https://kubesphere.us10.list-manage.com/subscribe/post?u=c85ea2b944b08b951f607bdd4&amp;id=83f673a2d9"
                            method="post"
                            target="_blank"
                            novalidate
                        >
                            <input name="EMAIL" id="email-input" type="text" placeholder='Please enter your email address'>
                            <button type="submit" id="email-submit">Subscribe</button>
                        </form>
                    </div>
                    <span id="message" data-message1='email is required!' data-message2='Please enter a valid email address!'></span>
                </div>
                <div class="right-div">
                    <ul class="common-flex-layout">
                        
                        
                            <li>
                                <div class="h3">Scenarios</div>
                                
                                
                                <a href="/website/devops/">Embrace DevOps</a>
                                
                                
                                
                                <a href="/website/service-mesh/">Microservices on K8s</a>
                                
                                
                                
                                <a href="/website/observability/">Cloud Native Observability</a>
                                
                                
                                
                                <a href="https://porterlb.io/" target="_blank" rel="noopener noreferrer">Bare Metal LoadBalancer</a>
                                
                                
                                
                                <a href="https://github.com/openpitrix/openpitrix" target="_blank" rel="noopener noreferrer">Multi-cloud Apps Mgmt</a>
                                
                                
                                
                                <a href="https://github.com/kubesphere/fluentbit-operator" target="_blank" rel="noopener noreferrer">Logging management</a>
                                
                                
                            </li>
                        
                            <li>
                                <div class="h3">Resources</div>
                                
                                
                                <a href="/website/projects/">Projects</a>
                                
                                
                                
                                <a href="/website/blogs/">Blogs</a>
                                
                                
                                
                                <a href="/website/conferences/">KubeCon &amp; QCon</a>
                                
                                
                                
                                <a href="/website/videos/">Videos</a>
                                
                                
                            </li>
                        
                            <li>
                                <div class="h3">KubeSphere Docs</div>
                                
                                
                                <a href="/docs/introduction/what-is-kubesphere/">Introduction</a>
                                
                                
                                
                                <a href="/docs/quick-start/all-in-one-on-linux/">Installation</a>
                                
                                
                                
                                <a href="/docs/quick-start/create-workspace-and-project/">Tutorial</a>
                                
                                
                                
                                <a href="/docs/api-reference/api-docs/">API Documentation</a>
                                
                                
                            </li>
                        
                            <li>
                                <div class="h3">Community</div>
                                
                                
                                <a href="/website/contribution/">Contribution</a>
                                
                                
                                
                                <a href="/website/case/">Case Studies</a>
                                
                                
                                
                                <a href="/website/partner/">Partners</a>
                                
                                
                                
                                <a href="https://github.com/kubesphere/kubesphere/blob/master/docs/roadmap.md" target="_blank" rel="noopener noreferrer">Roadmap</a>
                                
                                
                                
                                <a href="https://kubesphere.io" target="_blank" rel="noopener noreferrer">Global Site</a>
                                
                                
                                
                                <a href="https://kubesphere.com.cn/" target="_blank" rel="noopener noreferrer">China Site</a>
                                
                                
                                
                                <a href="https://kubesphere.eu" target="_blank" rel="noopener noreferrer">Europe Site</a>
                                
                                
                                
                                <a href="https://kubesphereturkey.com" target="_blank" rel="noopener noreferrer">Turkey Site</a>
                                
                                
                                
                                <a href="https://kubesphere.es" target="_blank" rel="noopener noreferrer">Spain Site</a>
                                
                                
                            </li>
                        
                        
                    </ul>
                </div>
            </div>
            <div class="down-main">
                <div class='img-div'>
                    <a class='wechat' href="javascript:void(0);">
                        <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="28" height="28" viewBox="0 0 28 28">
    <defs>
        <path id="a" d="M0 0h15.673v12.156H0z"/>
    </defs>
    <g fill="none" fill-rule="evenodd" transform="translate(1 1)">
        <circle cx="13" cy="13" r="13" stroke="#B6C2CD"/>
        <g transform="translate(5 7)">
            <mask id="b" fill="#fff">
                <use xlink:href="#a"/>
            </mask>
            <path fill="currentColor" d="M15.673 7.898c0-2.061-2.173-3.74-4.619-3.74-2.59 0-4.625 1.679-4.625 3.74 0 2.066 2.035 3.738 4.625 3.738.542 0 1.09-.13 1.632-.256l1.493.776-.408-1.29c1.09-.776 1.902-1.81 1.902-2.968zm-6.119-.645c-.27 0-.541-.257-.541-.514 0-.256.27-.514.541-.514.41 0 .681.258.681.514 0 .257-.271.514-.681.514zm2.994 0c-.27 0-.541-.257-.541-.514 0-.256.27-.514.54-.514.41 0 .681.258.681.514 0 .257-.277.514-.68.514z" mask="url(#b)"/>
            <path fill="currentColor" d="M10.602 3.674c.177 0 .356.011.533.029C10.657 1.576 8.27 0 5.543 0 2.498 0 0 1.974 0 4.485c0 1.45.829 2.64 2.216 3.564l-.552 1.588 1.94-.929c.693.129 1.251.263 1.94.263.17 0 .343-.005.515-.022a3.68 3.68 0 0 1-.172-1.104c0-2.302 2.081-4.171 4.715-4.171zM7.618 2.243c.417 0 .693.263.693.66s-.276.66-.693.66c-.418 0-.835-.263-.835-.66.006-.398.423-.66.835-.66zm-3.88 1.319c-.417 0-.834-.263-.834-.66s.417-.66.834-.66c.418 0 .695.263.695.66 0 .392-.277.66-.695.66z" mask="url(#b)"/>
        </g>
    </g>
</svg>

                        <div class="hide-div">
                            <p>Follow the official account</p>
                            <img src="/images/footer/wechat_code.svg" alt="">
                        </div>
                    </a>
                    <a class='facebook-a' href="https://www.facebook.com/kubesphere" target="_blank"></a>
                    <a class='twitter-a' href="https://twitter.com/KubeSphere" target="_blank" rel="noopener noreferrer"></a>
                    <a class='linkedin-a' href="https://www.linkedin.com/company/kubesphere/" target="_blank" rel="noopener noreferrer"></a>
                    
                    <a class='youtube-a' href="https://www.youtube.com/channel/UCyTdUQUYjf7XLjxECx63Hpw" target="_blank" rel="noopener noreferrer"></a>
                    <a class='slack-a' href="https://join.slack.com/t/kubesphere/shared_invite/enQtNTE3MDIxNzUxNzQ0LTZkNTdkYWNiYTVkMTM5ZThhODY1MjAyZmVlYWEwZmQ3ODQ1NmM1MGVkNWEzZTRhNzk0MzM5MmY4NDc3ZWVhMjE" target="_blank" rel="noopener noreferrer"></a>
                    <a class='github-a' href="https://github.com/cnimages/kubesphere" target="_blank" rel="noopener noreferrer"></a>
                    <a class='medium-a' href="https://itnext.io/@kubesphere" target="_blank" rel="noopener noreferrer"></a>
                </div>
                <p class='p1'>KubeSphere®️ 2020 All Rights Reserved.</p>
                
            </div>
        </div>
    </div>

</footer>

<script>
    var bindSubmit = function() {
        var input = $('#email-input')
        $('#email-submit').click(function(event) {
            event.stopPropagation()
            var email = input.val()
            var message1 = $('#message').data('message1')
            var message2 = $('#message').data('message2')
            if (!email) {
                event.preventDefault()
                showMessage(message1)
            } else if (!validateEmail(email)) {
                event.preventDefault()
                showMessage(message2)
            }
        })
    }

    var bindHideMessage = function() {
        $(window).click(function() {
            $('#message').hide()
        })
    }

    var showMessage = function(message) {
        $('#message').html(message).show()
    }

    var validateEmail = function(email) {
        var reg = /^[A-Za-z0-9]+([_\.][A-Za-z0-9]+)*@([A-Za-z0-9\-]+\.)+[A-Za-z]{2,6}$/
        return reg.test(email)
    }

    var lazyLoad = function(allImg, imgNum) {
        for (var i = 0; i < imgNum; i++) {
            var img = allImg.eq(i)
            var loaded = img.attr("data-loaded");
            if (loaded) {
                continue
            }
            if (img.offset().top < parseInt($(window).height()) + parseInt($(window).scrollTop())) {
                var src = img.attr("src")
                img.attr("src", src)
                img.attr("data-loaded", true)
            }
        }
    }

    var bindLayLoad = function() {
        var allImg = $('img')
        var imgNum = allImg.length
        lazyLoad(allImg, imgNum)
        $(window).scroll(function() {
            lazyLoad(allImg, imgNum)
        });
    }

    
    bindSubmit()
    bindHideMessage()
</script>

  
  
  <script type="text/javascript" src="/website/js/aside.34d4ca232760855916fede489417772adb45cdceab8541c6f6826e5d83a0b68e071a44f76a077fe90e39afe213cc1aab40272900f7cbdffb45068c7746c7b183.js" integrity="sha512-NNTKIydghVkW/t5IlBd3KttFzc6rhUHG9oJuXYOgto4HGkT3agd/6Q45r&#43;ITzBqrQCcpAPfL3/tFBox3Rsexgw=="></script>
  
  
  
  <script type="text/javascript" src="/website/js/markdown-tab.224c8a343197870e80877ad07e19b932b807d3fde3abccde667f2156378cb00497ebb11d2f872f09ea91e7282e87655f8cb4ef163da46e34d00dca44dbf52aad.js" integrity="sha512-IkyKNDGXhw6Ah3rQfhm5MrgH0/3jq8zeZn8hVjeMsASX67EdL4cvCeqR5yguh2VfjLTvFj2kbjTQDcpE2/UqrQ=="></script>
  
  <script>
    var viewer = new Viewer(document.querySelector('.md-body'), {
        url: 'src'
    })
  </script>
</body>

</html>
