<!DOCTYPE html>
<html lang="en-US">
<head>
<meta charset="utf-8">
<title>Deploy KubeSphere on VMware vSphere</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="description" content="How to install KubeSphere on VMware vSphere Linux machines.">
<meta name="keywords" content="Kubernetes, KubeSphere, VMware-vSphere, installation">

<meta property="og:type" content="article"/>
<meta property="og:title" content="Deploy KubeSphere on VMware vSphere"/>
<meta property="og:description" content="How to install KubeSphere on VMware vSphere Linux machines."/>
<meta property="og:image" content="https://cnimages.github.io/images/common/snapshot-en.png"/>
<meta property="og:url" content="https://cnimages.github.io/website/docs/installing-on-linux/on-premises/install-kubesphere-on-vmware-vsphere/"/>

<meta name="docsearch:language" content="en-US" /><link rel="stylesheet" href="/fonts/Roboto/stylesheet.css">
<link rel="stylesheet" href="/fonts/ProximaNova/stylesheet.css">
<link rel="stylesheet" href="/css/jquery.modal.min.css">
<link rel="stylesheet" href="/css/viewer.min.css">


<link rel="stylesheet" href="/website/scss/common.min.fd2f2584615728a729ee87ecf658d2f2e62d4c55dc6ca4c90029116aa21ee2e8.css">









<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css">


<link rel="stylesheet" href="/website/scss/doc.min.7723111c35b5fc4449bfc0d9f2cf1dd6823ae712e792e1d40a0baabf350dccd3.css">




<script src='/website/js/jquery-3.5.0.min.js'></script>
<script src='/website/js/viewer.min.js'></script>
<script src='/website/js/jquery.modal.min.js'></script>


<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>









<script type='text/javascript'>
!function(e,t,n,g,i){e[i]=e[i]||function(){(e[i].q=e[i].q||[]).push(arguments)},n=t.createElement("script"),tag=t.getElementsByTagName("script")[0],n.async=1,n.src=('https:'==document.location.protocol?'https://':'http://')+g,tag.parentNode.insertBefore(n,tag)}(window,document,"script","assets.giocdn.com/2.1/gio.js","gio");
  gio('init', '8a24ae300cbf8b8c', {});
  
  
  gio('send');
</script>




</head>

<body>

<header class="navigation">
    
    <div class="common-layout">
        <div class="header-container">
            <a href="/website/">
                <img src="/images/header/logo.svg" alt="" class="logo">
            </a>

            <ul class="nav">
                
                
                

                
                
                    
                
                    
                
                    
                

                <li  class="menu-li" >
                    <span class='menu-span'>Scenarios</span>
                    <ul class="dropdown-menu menu-2">
                        
                        <li >
                            
                            <a href="/website/devops/">Embracing One-stop DevOps Workflow</a>
                            
                        </li>
                        
                        <li >
                            
                            <a href="/website/service-mesh/">Running Microservices on Kubernetes</a>
                            
                        </li>
                        
                        <li >
                            
                            <a href="/website/observability/">Building Cloud Native Observability</a>
                            
                        </li>
                        
                    </ul>
                </li>
                

                
                

                
                
                    
                
                    
                
                    
                
                    
                

                <li  class="menu-li" >
                    <span class='menu-span'>Resources</span>
                    <ul class="dropdown-menu menu-3">
                        
                        <li >
                            
                            <a href="/website/projects/">Open Source Projects</a>
                            
                        </li>
                        
                        <li >
                            
                            <a href="/website/conferences/">KubeCon & QCon</a>
                            
                        </li>
                        
                        <li >
                            
                            <a href="/website/blogs/">Technology Blogs</a>
                            
                        </li>
                        
                        <li >
                            
                            <a href="/website/videos/">Video Resources</a>
                            
                        </li>
                        
                    </ul>
                </li>
                

                
                

                
                
                    
                
                    
                
                    
                
                    
                

                <li  class="menu-li" >
                    <span class='menu-span'>Documentation</span>
                    <ul class="dropdown-menu menu-4">
                        
                        <li >
                            
                            <a href="/website/docs/">v3.0.0 <img src='/images/header/star.svg' alt='star'></a>
                            
                        </li>
                        
                        <li >
                            
                            <a href="https://v2-1.docs.kubesphere.io/docs" target="_blank" rel="noopener noreferrer">v2.1.x</a>
                            
                        </li>
                        
                        <li >
                            
                            <a href="https://v2-0.docs.kubesphere.io/docs/" target="_blank" rel="noopener noreferrer">v2.0.x</a>
                            
                        </li>
                        
                        <li >
                            
                            <a href="https://v1-0.docs.kubesphere.io/docs/" target="_blank" rel="noopener noreferrer">v1.0.0</a>
                            
                        </li>
                        
                    </ul>
                </li>
                

                
                

                
                
                    
                
                    
                
                    
                
                    
                
                    
                

                <li  class="menu-li" >
                    <span class='menu-span'>Community</span>
                    <ul class="dropdown-menu menu-5">
                        
                        <li >
                            
                            <a href="/website/contribution/">Contribution</a>
                            
                        </li>
                        
                        <li >
                            
                            <a href="/website/case/">Case Studies</a>
                            
                        </li>
                        
                        <li >
                            
                            <a href="/website/partner/">Partner</a>
                            
                        </li>
                        
                        <li >
                            
                            <a href="/website/news/">News</a>
                            
                        </li>
                        
                        <li >
                            
                            <a href="https://github.com/cnimages/kubesphere/blob/master/docs/roadmap.md" target="_blank" rel="noopener noreferrer">RoadMap</a>
                            
                        </li>
                        
                    </ul>
                </li>
                

                

            </ul>
            <div class="right-menu">
                <ul>
                    <li class="language-menu">
                        <div>
                            <img src="/images/header/black.svg" alt="">
                            <span>English</span>
                        </div>
                        
                        <ul class="dropdown-menu">
                            
                            <li onclick="location = '\/website\/docs\/installing-on-linux\/on-premises\/install-kubesphere-on-vmware-vsphere\/'">English</li>
                            
                            <li onclick="location = '\/website\/zh\/docs\/installing-on-linux\/on-premises\/install-kubesphere-on-vmware-vsphere\/'">简体中文</li>
                            
                        </ul>
                        
                    </li>
                    <li class='btn-li'>
                        <a href="https://demo.kubesphere.io/login" target="_blank" rel="noopener noreferrer">
                            <button class="demo-btn">Demo →</button>
                        </a>
                        <ol class="dropdown-menu">
                            <li>1.Experience account: demo1 / Demo123</li>
                            <li>2.This account is only allowed to view parts of UI</li>
                            <li>3.It&#39;s recommended that install KubeSphere in your environment</li>
                        </ol>
                    </li>
                    <li class='link-li'>
                        <a class='link-1' href="https://join.slack.com/t/kubesphere/shared_invite/enQtNTE3MDIxNzUxNzQ0LTZkNTdkYWNiYTVkMTM5ZThhODY1MjAyZmVlYWEwZmQ3ODQ1NmM1MGVkNWEzZTRhNzk0MzM5MmY4NDc3ZWVhMjE" target="_blank" rel="noopener noreferrer"></a>
                        <a class='link-2' href="https://twitter.com/KubeSphere" target="_blank" rel="noopener noreferrer"></a>
                        <a class='link-3' href="https://github.com/cnimages/kubesphere" target="_blank" rel="noopener noreferrer"></a>
                    </li>
                    <li class="menu-icon">
                        <img src="/images/header/menu.svg" alt="">
                    </li>
                </ul>
            </div>
        </div>
    </div>

    <div id="modal-for-menu" class="modal">
        <ul class="nav">
            
            
            

            
            
                
            
                
            
                
            

            <li data-check="0"  class="menu-li" >
                <span class='menu-span'>Scenarios</span>
                <ul class="dropdown-menu">
                    
                    <li >
                        <a href="/website/devops/">Embracing One-stop DevOps Workflow</a>
                    </li>
                    
                    <li >
                        <a href="/website/service-mesh/">Running Microservices on Kubernetes</a>
                    </li>
                    
                    <li >
                        <a href="/website/observability/">Building Cloud Native Observability</a>
                    </li>
                    
                </ul>
            </li>
            

            
            

            
            
                
            
                
            
                
            
                
            

            <li data-check="0"  class="menu-li" >
                <span class='menu-span'>Resources</span>
                <ul class="dropdown-menu">
                    
                    <li >
                        <a href="/website/projects/">Open Source Projects</a>
                    </li>
                    
                    <li >
                        <a href="/website/conferences/">KubeCon & QCon</a>
                    </li>
                    
                    <li >
                        <a href="/website/blogs/">Technology Blogs</a>
                    </li>
                    
                    <li >
                        <a href="/website/videos/">Video Resources</a>
                    </li>
                    
                </ul>
            </li>
            

            
            

            
            
                
            
                
            
                
            
                
            

            <li data-check="0"  class="menu-li" >
                <span class='menu-span'>Documentation</span>
                <ul class="dropdown-menu">
                    
                    <li >
                        <a href="/website/docs/">v3.0.0 <img src='/images/header/star.svg' alt='star'></a>
                    </li>
                    
                    <li >
                        <a href="https://v2-1.docs.kubesphere.io/docs">v2.1.x</a>
                    </li>
                    
                    <li >
                        <a href="https://v2-0.docs.kubesphere.io/docs/">v2.0.x</a>
                    </li>
                    
                    <li >
                        <a href="https://v1-0.docs.kubesphere.io/docs/">v1.0.0</a>
                    </li>
                    
                </ul>
            </li>
            

            
            

            
            
                
            
                
            
                
            
                
            
                
            

            <li data-check="0"  class="menu-li" >
                <span class='menu-span'>Community</span>
                <ul class="dropdown-menu">
                    
                    <li >
                        <a href="/website/contribution/">Contribution</a>
                    </li>
                    
                    <li >
                        <a href="/website/case/">Case Studies</a>
                    </li>
                    
                    <li >
                        <a href="/website/partner/">Partner</a>
                    </li>
                    
                    <li >
                        <a href="/website/news/">News</a>
                    </li>
                    
                    <li >
                        <a href="https://github.com/cnimages/kubesphere/blob/master/docs/roadmap.md">RoadMap</a>
                    </li>
                    
                </ul>
            </li>
            

            

        </ul>
        <div class="btn-div">
            <a href="https://demo.kubesphere.io/login" target="_blank" rel="noopener noreferrer">
                <button class="demo-btn">Demo →</button>
            </a>
        </div>
        <div class="link-div">
            <a href="https://join.slack.com/t/kubesphere/shared_invite/enQtNTE3MDIxNzUxNzQ0LTZkNTdkYWNiYTVkMTM5ZThhODY1MjAyZmVlYWEwZmQ3ODQ1NmM1MGVkNWEzZTRhNzk0MzM5MmY4NDc3ZWVhMjE" target="_blank" rel="noopener noreferrer">
                <img src="/images/header/slack-hover.svg" alt="">
            </a>
            <a href="https://twitter.com/KubeSphere" target="_blank" rel="noopener noreferrer">
                <img src="/images/header/twitter-hover.svg" alt="">
            </a>
            <a href="https://github.com/cnimages/kubesphere" target="_blank" rel="noopener noreferrer">
                <img src="/images/header/github-hover.svg" alt="">
            </a>
        </div>
    </div>
</header>
<script>
var bindNavMouseEvent = function(selector) {
    var flag = false
    $(selector).mouseenter(function() {
        if (flag) {
            return false
        }
        flag = true
        $(this).find('.dropdown-menu').fadeIn(200, function() {
            flag = false
        })
    });
    $(selector).mouseleave(function() {
        $(this).find('.dropdown-menu').fadeOut(200)
    });
}

var bindScrollChangeHeader = function() {
    var check = 100
    var header = $('header')
    window.addEventListener('scroll', function() {
        var scrollY = window.scrollY;
        if (scrollY > 100) {
            header.addClass('navigationScroll')
        } else {
            header.removeClass('navigationScroll')
        }
    })
}

var bindClickShowMenu = function() {
    $('.menu-icon').click(function() {
        $('#modal-for-menu').modal()
    })
}

var bindClickModalLi = function() {
    $('.modal .menu-li').click(function() {
        var check = $(this).data('check')
        if (check === 0) {
            $(this).data('check', 1)
            $(this).find('.dropdown-menu').slideDown(200)
        } else {
            $(this).data('check', 0)
            $(this).find('.dropdown-menu').slideUp(200)
        }
        $(this).find('.menu-span').toggleClass('up')
    })
}

var bindClickClose = function() {
    $('#close-join').click(function() {
        $('.navigation .join-div').hide()
        $('.main-section').removeClass('padding')
    })
}

var language = 'en'

bindClickClose()

bindScrollChangeHeader()

bindNavMouseEvent('.header-container .menu-li')
bindNavMouseEvent('.header-container .language-menu')
bindNavMouseEvent('.header-container .btn-li')

bindClickShowMenu()
bindClickModalLi()


</script>
<main class='main-section '>
    <section class='section-1 bg-cover'>
        <div class="common-layout">
            <ol  class="breadcrumbnav">
  

  
  

  
  

  
  

  


<li>
  <a href="/website/docs/">Documentation&nbsp;/&nbsp;</a>
</li>



  


<li>
  <a href="/website/docs/installing-on-linux/">Installing on Linux&nbsp;/&nbsp;</a>
</li>



  


<li>
  <a href="">Installing in On-premises Environments&nbsp;/&nbsp;</a>
</li>



  


<li class="active">
  <a href="/website/docs/installing-on-linux/on-premises/install-kubesphere-on-vmware-vsphere/">Deploy KubeSphere on VMware vSphere</a>
</li>



</ol>


    
            <div class="title-div">
                
                
                
                
                    
                
                    
                
                    
                
                    
                        
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                <h1>Installing on Linux</h1>
                <div class="menu section-control">
                    <div></div>
                    <div></div>
                    <div></div>
                </div>
            </div>
    
            <div class="search-div">
                <div class="search-input-div">
  <input id="search" type="text" placeholder="Search Documentation">
  <svg width="1em" height="1em" viewBox="0 0 18 18">
    <g fill="none" fill-rule="evenodd">
      <path d="M12.606 11.192l5.24 5.24-1.415 1.414-5.239-5.24a7.041 7.041 0 0 0 1.414-1.414z" fill="#324558"></path>
      <path d="M7 14A7 7 0 1 1 7 0a7 7 0 0 1 0 14zm0-2A5 5 0 1 0 7 2a5 5 0 0 0 0 10z" fill="#B6C2CD"></path>
    </g>
  </svg>
</div>
<script>
docsearch({
  apiKey: '221332a85783d16a5b930969fe4a934a',
  indexName: 'kubesphere',
  inputSelector: '#search',
  algoliaOptions: {
      facetFilters: [`lang:${language}`],
      hitsPerPage: 10,
  },
  transformData: function(hits) {
    hits.forEach(hit => {
      if (typeof window !== undefined) {
        var host = window.location.host
        if (host == 'kubesphere.com.cn') {
          if (language == 'en') {
            host = host + '/en'
            hit.url = hit.url.replace('kubesphere.io', host)
          } else if (language == 'zh') {
            hit.url = hit.url.replace('kubesphere.io/zh', host)
          }
        } else {
          hit.url = hit.url.replace('kubesphere.io', host)
        }
      }
    })
    return hits
  },
  debug: false,
})
</script>
            </div>
        </div>
    </section>
    
    <section class="section-menu">
    
        <div class="common-layout">
            
<ul class="common-flex-layout">
    
    <li>
        <h2>
            <span><img src="/images/docs/docs.svg" alt="Release Notes"></span>
            <a href="/website/docs/release/">Release Notes</a>
        </h2>
        
        
        <ul>

            
                
                <li>
                    
                    <a href="/website/docs/release/release-v300/" title="Release Notes - 3.0.0">Release Notes - 3.0.0</a>
                    
                </li>
                
                <li>
                    
                    <a href="/website/docs/release/release-v211/" title="Release Notes - 2.1.1">Release Notes - 2.1.1</a>
                    
                </li>
                
                <li>
                    
                    <a href="/website/docs/release/release-v210/" title="Release Notes - 2.1.0">Release Notes - 2.1.0</a>
                    
                </li>
                
                <li>
                    
                    <a href="/website/docs/release/release-v202/" title="Release Notes - 2.0.2">Release Notes - 2.0.2</a>
                    
                </li>
                
                <li>
                    
                    <a href="/website/docs/release/release-v201/" title="Release Notes - 2.0.1">Release Notes - 2.0.1</a>
                    
                </li>
                
                <li>
                    
                    <a href="/website/docs/release/release-v200/" title="Release Notes - 2.0.0">Release Notes - 2.0.0</a>
                    
                </li>
                
            
        </ul>
    </li>
    
    <li>
        <h2>
            <span><img src="/images/docs/docs.svg" alt="Introduction"></span>
            <a href="/website/docs/introduction/">Introduction</a>
        </h2>
        
        
        <ul>

            
                
                <li>
                    
                    <a href="/website/docs/introduction/what-is-kubesphere/" title="What is KubeSphere">What is KubeSphere</a>
                    
                </li>
                
                <li>
                    
                    <a href="/website/docs/introduction/features/" title="Features">Features</a>
                    
                </li>
                
                <li>
                    
                    <a href="/website/docs/introduction/architecture/" title="Architecture">Architecture</a>
                    
                </li>
                
                <li>
                    
                    <a href="/website/docs/introduction/advantages/" title="Advantages">Advantages</a>
                    
                </li>
                
                <li>
                    
                    <a href="/website/docs/introduction/scenarios/" title="Use Cases">Use Cases</a>
                    
                </li>
                
                <li>
                    
                    <a href="/website/docs/introduction/glossary/" title="Glossary">Glossary</a>
                    
                </li>
                
            
        </ul>
    </li>
    
    <li>
        <h2>
            <span><img src="/images/docs/docs.svg" alt="Quickstarts"></span>
            <a href="/website/docs/quick-start/">Quickstarts</a>
        </h2>
        
        
        <ul>

            
                
                <li>
                    
                    <a href="/website/docs/quick-start/all-in-one-on-linux/" title="All-in-one Installation on Linux">All-in-one Installation on Linux</a>
                    
                </li>
                
                <li>
                    
                    <a href="/website/docs/quick-start/minimal-kubesphere-on-k8s/" title="Minimal KubeSphere on Kubernetes">Minimal KubeSphere on Kubernetes</a>
                    
                </li>
                
                <li>
                    
                    <a href="/website/docs/quick-start/create-workspace-and-project/" title="Create Workspace, Project, Account and Role">Create Workspace, Project, Account and Role</a>
                    
                </li>
                
                <li>
                    
                    <a href="/website/docs/quick-start/deploy-bookinfo-to-k8s/" title="Deploy Bookinfo and Manage Traffic">Deploy Bookinfo and Manage Traffic</a>
                    
                </li>
                
                <li>
                    
                    <a href="/website/docs/quick-start/wordpress-deployment/" title="Compose and Deploy WordPress">Compose and Deploy WordPress</a>
                    
                </li>
                
                <li>
                    
                    <a href="/website/docs/quick-start/enable-pluggable-components/" title="Enable Pluggable Components">Enable Pluggable Components</a>
                    
                </li>
                
            
        </ul>
    </li>
    
    <li>
        <h2>
            <span><img src="/images/docs/docs.svg" alt="Installing on Linux"></span>
            <a href="/website/docs/installing-on-linux/">Installing on Linux</a>
        </h2>
        
        
        <ul>

            
                
                <li>
                    
                    




    
        <a href="/website/docs/installing-on-linux/introduction/intro/">Introduction</a>
    


                    
                </li>
                
                <li>
                    
                    




    
        <a href="/website/docs/installing-on-linux/on-premises/install-kubesphere-on-vmware-vsphere/">Installing in On-premises Environments</a>
    


                    
                </li>
                
                <li>
                    
                    




    
        <a href="/website/docs/installing-on-linux/public-cloud/install-ks-on-azure-vms/">Installing on Public Cloud</a>
    


                    
                </li>
                
                <li>
                    
                    




    
        <a href="/website/docs/installing-on-linux/cluster-operation/add-new-nodes/">Add/Delete Nodes</a>
    


                    
                </li>
                
                <li>
                    
                    




    
        <a href="/website/docs/installing-on-linux/uninstalling/uninstalling-kubesphere-and-kubernetes/">Uninstalling</a>
    


                    
                </li>
                
                <li>
                    
                    




    
        <a href="/website/docs/installing-on-linux/faq/configure-booster/">FAQ</a>
    


                    
                </li>
                
            
        </ul>
    </li>
    
    <li>
        <h2>
            <span><img src="/images/docs/docs.svg" alt="Installing on Kubernetes"></span>
            <a href="/website/docs/installing-on-kubernetes/">Installing on Kubernetes</a>
        </h2>
        
        
        <ul>

            
                
                <li>
                    
                    




    
        <a href="/website/docs/installing-on-kubernetes/introduction/overview/">Introduction</a>
    


                    
                </li>
                
                <li>
                    
                    




    
        <a href="/website/docs/installing-on-kubernetes/hosted-kubernetes/install-kubesphere-on-aks/">Installing on Hosted Kubernetes</a>
    


                    
                </li>
                
                <li>
                    
                    




    
        <a href="/website/docs/installing-on-kubernetes/on-prem-kubernetes/install-ks-on-linux-airgapped/">Installing on On-premises Kubernetes</a>
    


                    
                </li>
                
                <li>
                    
                    




    
        <a href="/website/docs/installing-on-kubernetes/uninstalling/uninstalling-kubesphere-from-k8s/">Uninstalling</a>
    


                    
                </li>
                
                <li>
                    
                    




    
        <a href="/website/docs/installing-on-kubernetes/faq/faq1/">FAQ</a>
    


                    
                </li>
                
            
        </ul>
    </li>
    
    <li>
        <h2>
            <span><img src="/images/docs/docs.svg" alt="Multi-cluster Management"></span>
            <a href="/website/docs/multicluster-management/">Multi-cluster Management</a>
        </h2>
        
        
        <ul>

            
                
                <li>
                    
                    




    
        <a href="/website/docs/multicluster-management/introduction/overview/">Introduction</a>
    


                    
                </li>
                
                <li>
                    
                    




    
        <a href="/website/docs/multicluster-management/enable-multicluster/direct-connection/">Enable Multi-cluster in KubeSphere</a>
    


                    
                </li>
                
                <li>
                    
                    




    
        <a href="/website/docs/multicluster-management/import-cloud-hosted-k8s/import-aliyun-ack/">Import Cloud-hosted Kubernetes Cluster</a>
    


                    
                </li>
                
                <li>
                    
                    




    
        <a href="/website/docs/multicluster-management/import-on-prem-k8s/import-kubeadm-k8s/">Import On-prem Kubernetes Cluster</a>
    


                    
                </li>
                
                <li>
                    
                    




    
        <a href="/website/docs/multicluster-management/remove-cluster/kubefed-in-kubesphere/">Remove Cluster</a>
    


                    
                </li>
                
            
        </ul>
    </li>
    
    <li>
        <h2>
            <span><img src="/images/docs/docs.svg" alt="Enable Pluggable Components"></span>
            <a href="/website/docs/pluggable-components/">Enable Pluggable Components</a>
        </h2>
        
        
        <ul>

            
                
                <li>
                    
                    <a href="/website/docs/pluggable-components/overview/" title="Overview">Overview</a>
                    
                </li>
                
                <li>
                    
                    <a href="/website/docs/pluggable-components/app-store/" title="KubeSphere App Store">KubeSphere App Store</a>
                    
                </li>
                
                <li>
                    
                    <a href="/website/docs/pluggable-components/devops/" title="KubeSphere DevOps System">KubeSphere DevOps System</a>
                    
                </li>
                
                <li>
                    
                    <a href="/website/docs/pluggable-components/auditing-logs/" title="KubeSphere Auditing Logs">KubeSphere Auditing Logs</a>
                    
                </li>
                
                <li>
                    
                    <a href="/website/docs/pluggable-components/events/" title="KubeSphere Events">KubeSphere Events</a>
                    
                </li>
                
                <li><a href="/website/docs/pluggable-components/">Learn More...</a></li>
            
        </ul>
    </li>
    
    <li>
        <h2>
            <span><img src="/images/docs/docs.svg" alt="Upgrade"></span>
            <a href="/website/docs/upgrade/">Upgrade</a>
        </h2>
        
        
        <ul>

            
                
                <li>
                    
                    <a href="/website/docs/upgrade/upgrade-overview/" title="Overview">Overview</a>
                    
                </li>
                
                <li>
                    
                    <a href="/website/docs/upgrade/upgrade-with-kubekey/" title="Upgrade with KubeKey">Upgrade with KubeKey</a>
                    
                </li>
                
                <li>
                    
                    <a href="/website/docs/upgrade/upgrade-with-ks-installer/" title="Upgrade with ks-installer">Upgrade with ks-installer</a>
                    
                </li>
                
                <li>
                    
                    <a href="/website/docs/upgrade/what-changed/" title="Changes after Upgrade">Changes after Upgrade</a>
                    
                </li>
                
                <li>
                    
                    <a href="/website/docs/upgrade/upgrade-faq/" title="FAQ">FAQ</a>
                    
                </li>
                
            
        </ul>
    </li>
    
    <li>
        <h2>
            <span><img src="/images/docs/docs.svg" alt="Cluster Administration"></span>
            <a href="/website/docs/cluster-administration/">Cluster Administration</a>
        </h2>
        
        
        <ul>

            
                
                <li>
                    
                    <a href="/website/docs/cluster-administration/persistent-volume-and-storage-class/" title="Persistent Volume and Storage Class">Persistent Volume and Storage Class</a>
                    
                </li>
                
                <li>
                    
                    <a href="/website/docs/cluster-administration/nodes/" title="Node Management">Node Management</a>
                    
                </li>
                
                <li>
                    
                    <a href="/website/docs/cluster-administration/cluster-status-monitoring/" title="Cluster Status Monitoring">Cluster Status Monitoring</a>
                    
                </li>
                
                <li>
                    
                    <a href="/website/docs/cluster-administration/application-resources-monitoring/" title="Application Resources Monitoring">Application Resources Monitoring</a>
                    
                </li>
                
                <li>
                    
                    




    
        <a href="/website/docs/cluster-administration/cluster-wide-alerting-and-notification/alertmanager/">Cluster-wide Alerting and Notification</a>
    


                    
                </li>
                
                <li><a href="/website/docs/cluster-administration/">Learn More...</a></li>
            
        </ul>
    </li>
    
    <li>
        <h2>
            <span><img src="/images/docs/docs.svg" alt="Workspace Administration and User Guide"></span>
            <a href="/website/docs/workspace-administration/">Workspace Administration and User Guide</a>
        </h2>
        
        
        <ul>

            
                
                <li>
                    
                    <a href="/website/docs/workspace-administration/workspace-overview/" title="Workspace Overview">Workspace Overview</a>
                    
                </li>
                
                <li>
                    
                    <a href="/website/docs/workspace-administration/upload-helm-based-application/" title="Upload Helm-based Applications">Upload Helm-based Applications</a>
                    
                </li>
                
                <li>
                    
                    <a href="/website/docs/workspace-administration/role-and-member-management/" title="Role and Member Management">Role and Member Management</a>
                    
                </li>
                
                <li>
                    
                    <a href="/website/docs/workspace-administration/workspace-network-isolation/" title="Workspace Network Isolation">Workspace Network Isolation</a>
                    
                </li>
                
                <li>
                    
                    




    
        <a href="/website/docs/workspace-administration/app-repository/import-helm-repository/">App Repository</a>
    


                    
                </li>
                
            
        </ul>
    </li>
    
    <li>
        <h2>
            <span><img src="/images/docs/docs.svg" alt="Project User Guide"></span>
            <a href="/website/docs/project-user-guide/">Project User Guide</a>
        </h2>
        
        
        <ul>

            
                
                <li>
                    
                    




    
        <a href="/website/docs/project-user-guide/application/app-template/">Applications</a>
    


                    
                </li>
                
                <li>
                    
                    




    
        <a href="/website/docs/project-user-guide/application-workloads/deployments/">Application Workloads</a>
    


                    
                </li>
                
                <li>
                    
                    




    
        <a href="/website/docs/project-user-guide/configuration/configmaps/">Configurations</a>
    


                    
                </li>
                
                <li>
                    
                    




    
        <a href="/website/docs/project-user-guide/custom-application-monitoring/introduction/">Custom Application Monitoring</a>
    


                    
                </li>
                
                <li>
                    
                    




    
        <a href="/website/docs/project-user-guide/grayscale-release/overview/">Grayscale Release</a>
    


                    
                </li>
                
                <li><a href="/website/docs/project-user-guide/">Learn More...</a></li>
            
        </ul>
    </li>
    
    <li>
        <h2>
            <span><img src="/images/docs/docs.svg" alt="DevOps User Guide"></span>
            <a href="/website/docs/devops-user-guide/">DevOps User Guide</a>
        </h2>
        
        
        <ul>

            
                
                <li>
                    
                    




    
        <a href="/website/docs/devops-user-guide/how-to-use/devops-project-management/">Using DevOps</a>
    


                    
                </li>
                
                <li>
                    
                    




    
        <a href="/website/docs/devops-user-guide/how-to-integrate/sonarqube/">Tool Integration</a>
    


                    
                </li>
                
                <li>
                    
                    




    
        <a href="/website/docs/devops-user-guide/examples/go-project-pipeline/">Examples</a>
    


                    
                </li>
                
            
        </ul>
    </li>
    
    <li>
        <h2>
            <span><img src="/images/docs/docs.svg" alt="Access Control and Account Management"></span>
            <a href="/website/docs/access-control-and-account-management/">Access Control and Account Management</a>
        </h2>
        
        
        <ul>

            
                
                <li>
                    
                    <a href="/website/docs/access-control-and-account-management/configuring-authentication/" title="Configure Authentication">Configure Authentication</a>
                    
                </li>
                
            
        </ul>
    </li>
    
    <li>
        <h2>
            <span><img src="/images/docs/docs.svg" alt="Project Administration Guide"></span>
            <a href="/website/docs/project-administration/">Project Administration Guide</a>
        </h2>
        
        
        <ul>

            
                
                <li>
                    
                    <a href="/website/docs/project-administration/project-quota/" title="Project Quotas">Project Quotas</a>
                    
                </li>
                
                <li>
                    
                    <a href="/website/docs/project-administration/project-gateway/" title="Project Gateway">Project Gateway</a>
                    
                </li>
                
                <li>
                    
                    <a href="/website/docs/project-administration/project-network-isolation/" title="Project Network Isolation">Project Network Isolation</a>
                    
                </li>
                
                <li>
                    
                    <a href="/website/docs/project-administration/project-and-multicluster-project/" title="Projects and Multi-cluster Projects">Projects and Multi-cluster Projects</a>
                    
                </li>
                
                <li>
                    
                    <a href="/website/docs/project-administration/role-and-member-management/" title="Role and Member Management">Role and Member Management</a>
                    
                </li>
                
            
        </ul>
    </li>
    
    <li>
        <h2>
            <span><img src="/images/docs/docs.svg" alt="App Store"></span>
            <a href="/website/docs/application-store/">App Store</a>
        </h2>
        
        
        <ul>

            
                
                <li>
                    
                    




    
        <a href="/website/docs/application-store/app-developer-guide/helm-developer-guide/">Application Developer Guide</a>
    


                    
                </li>
                
                <li>
                    
                    




    
        <a href="/website/docs/application-store/built-in-apps/rabbitmq-app/">Built-in Applications</a>
    


                    
                </li>
                
                <li>
                    
                    




    
        <a href="/website/docs/application-store/external-apps/gitlab-app/">External Applications</a>
    


                    
                </li>
                
                <li>
                    
                    <a href="/website/docs/application-store/app-lifecycle-management/" title="Application Lifecycle Management">Application Lifecycle Management</a>
                    
                </li>
                
            
        </ul>
    </li>
    
    <li>
        <h2>
            <span><img src="/images/docs/docs.svg" alt="Toolbox"></span>
            <a href="/website/docs/toolbox/">Toolbox</a>
        </h2>
        
        
        <ul>

            
                
                <li>
                    
                    <a href="/website/docs/toolbox/log-query/" title="Log Query">Log Query</a>
                    
                </li>
                
                <li>
                    
                    <a href="/website/docs/toolbox/events-query/" title="Event Query">Event Query</a>
                    
                </li>
                
                <li>
                    
                    




    
        <a href="/website/docs/toolbox/auditing/auditing-receive-customize/">Auditing</a>
    


                    
                </li>
                
                <li>
                    
                    <a href="/website/docs/toolbox/web-kubectl/" title="Web Kubectl">Web Kubectl</a>
                    
                </li>
                
                <li>
                    
                    <a href="/website/docs/toolbox/history/" title="History">History</a>
                    
                </li>
                
            
        </ul>
    </li>
    
    <li>
        <h2>
            <span><img src="/images/docs/docs.svg" alt="FAQ"></span>
            <a href="/website/docs/faq/">FAQ</a>
        </h2>
        
        
        <ul>

            
                
                <li>
                    
                    <a href="/website/docs/faq/console-faq/" title="Questions about KubeSphere Console">Questions about KubeSphere Console</a>
                    
                </li>
                
                <li>
                    
                    <a href="/website/docs/faq/telemetry/" title="Telemetry in KubeSphere">Telemetry in KubeSphere</a>
                    
                </li>
                
            
        </ul>
    </li>
    
    <li>
        <h2>
            <span><img src="/images/docs/docs.svg" alt="Reference"></span>
            <a href="/website/docs/reference/">Reference</a>
        </h2>
        
        
        <ul>

            
                
                <li>
                    
                    <a href="/website/docs/reference/glossary/" title="Glossary">Glossary</a>
                    
                </li>
                
                <li>
                    
                    <a href="/website/docs/reference/api-docs/" title="KubeSphere API">KubeSphere API</a>
                    
                </li>
                
                <li>
                    
                    




    
        <a href="/website/docs/reference/api-changes/logging/">API Changes</a>
    


                    
                </li>
                
            
        </ul>
    </li>
    
    
    <li style="height: 0; margin: 0; padding: 0;"></li>
    
    <li style="height: 0; margin: 0; padding: 0;"></li>
    
    <li style="height: 0; margin: 0; padding: 0;"></li>
    
    <li style="height: 0; margin: 0; padding: 0;"></li>
    
    <li style="height: 0; margin: 0; padding: 0;"></li>
    
    <li style="height: 0; margin: 0; padding: 0;"></li>
    
    <li style="height: 0; margin: 0; padding: 0;"></li>
    
    <li style="height: 0; margin: 0; padding: 0;"></li>
    
    <li style="height: 0; margin: 0; padding: 0;"></li>
    
    <li style="height: 0; margin: 0; padding: 0;"></li>
    
    <li style="height: 0; margin: 0; padding: 0;"></li>
    
    <li style="height: 0; margin: 0; padding: 0;"></li>
    
    <li style="height: 0; margin: 0; padding: 0;"></li>
    
    <li style="height: 0; margin: 0; padding: 0;"></li>
    
    <li style="height: 0; margin: 0; padding: 0;"></li>
    
    <li style="height: 0; margin: 0; padding: 0;"></li>
    
    <li style="height: 0; margin: 0; padding: 0;"></li>
    
    <li style="height: 0; margin: 0; padding: 0;"></li>
    
</ul>
        </div>
    
    </section>
    
    <section class="section-2">
        <div class="common-layout">
            <div class="left-div left-tree">
                <div class="inner-tree">
                    <div>
  <nav class='nav-menu'>
		
		
		
		
			
		
			
		
			
		
			
				
			
		
			
		
			
		
			
		
			
		
			
		
			
		
			
		
			
		
			
		
			
		
			
		
			
		
			
		
			
		
    






<ul class="ul-active">
	
	
	
	<li class="list">
		
		




<p class="list-title">
	<span class="arrow "></span>
	<span>Introduction</span>
</p>


<ul class="">
	
	
	
	<li class="list">
		
		<a href="/website/docs/installing-on-linux/introduction/intro/">Overview</a>
		
	</li>
	
	
	<li class="list">
		
		<a href="/website/docs/installing-on-linux/introduction/multioverview/">Multi-node Installation</a>
		
	</li>
	
	
	<li class="list">
		
		<a href="/website/docs/installing-on-linux/introduction/air-gapped-installation/">Air-gapped Installation</a>
		
	</li>
	
	
	<li class="list">
		
		<a href="/website/docs/installing-on-linux/introduction/port-firewall/">Port Requirements</a>
		
	</li>
	
	
	<li class="list">
		
		<a href="/website/docs/installing-on-linux/introduction/vars/">Kubernetes Cluster Configuration</a>
		
	</li>
	
	
	<li class="list">
		
		<a href="/website/docs/installing-on-linux/introduction/storage-configuration/">Persistent Storage Configuration</a>
		
	</li>
	
</ul>

		
	</li>
	
	
	<li class="list">
		
		




<p class="list-title">
	<span class="arrow arrow-open"></span>
	<span>Installing in On-premises Environments</span>
</p>


<ul class="ul-active">
	
	
	
	<li class="list active">
		
		<a href="/website/docs/installing-on-linux/on-premises/install-kubesphere-on-vmware-vsphere/">Deploy KubeSphere on VMware vSphere</a>
		
	</li>
	
	
	<li class="list">
		
		<a href="/website/docs/installing-on-linux/on-premises/install-kubesphere-on-bare-metal/">Deploy KubeSphere on Bare Metal</a>
		
	</li>
	
</ul>

		
	</li>
	
	
	<li class="list">
		
		




<p class="list-title">
	<span class="arrow "></span>
	<span>Installing on Public Cloud</span>
</p>


<ul class="">
	
	
	
	<li class="list">
		
		<a href="/website/docs/installing-on-linux/public-cloud/install-ks-on-azure-vms/">Deploy KubeSphere on Azure VM Instance</a>
		
	</li>
	
	
	<li class="list">
		
		<a href="/website/docs/installing-on-linux/public-cloud/kubesphere-on-qingcloud-instance/">Deploy KubeSphere on QingCloud Instance</a>
		
	</li>
	
</ul>

		
	</li>
	
	
	<li class="list">
		
		




<p class="list-title">
	<span class="arrow "></span>
	<span>Add/Delete Nodes</span>
</p>


<ul class="">
	
	
	
	<li class="list">
		
		<a href="/website/docs/installing-on-linux/cluster-operation/add-new-nodes/">Add New Nodes</a>
		
	</li>
	
	
	<li class="list">
		
		<a href="/website/docs/installing-on-linux/cluster-operation/remove-nodes/">Remove Nodes</a>
		
	</li>
	
</ul>

		
	</li>
	
	
	<li class="list">
		
		




<p class="list-title">
	<span class="arrow "></span>
	<span>Uninstalling</span>
</p>


<ul class="">
	
	
	
	<li class="list">
		
		<a href="/website/docs/installing-on-linux/uninstalling/uninstalling-kubesphere-and-kubernetes/">Uninstalling KubeSphere and Kubernetes</a>
		
	</li>
	
</ul>

		
	</li>
	
	
	<li class="list">
		
		




<p class="list-title">
	<span class="arrow "></span>
	<span>FAQ</span>
</p>


<ul class="">
	
	
	
	<li class="list">
		
		<a href="/website/docs/installing-on-linux/faq/configure-booster/">Configure Booster for Installation</a>
		
	</li>
	
</ul>

		
	</li>
	
</ul>

  </nav>
</div>


<script>
	$('.nav-menu .list-title').click(function() {
		$(this).find('.arrow').toggleClass('arrow-open')
		$(this).next().toggleClass('ul-active')
	})
</script>

                    
                </div>
            </div>
            <div class="second-section-menu">
                <div></div>
                <div></div>
                <div></div>
            </div>
            <div class="middle-div">
                <div class="top-div common-flex-layout">
                    <div class="contributor-div">
                        <span>Last updated:</span>
                        <span class="update-time"></span>
                        <a href="https://github.com/cnimages/website/blob/master/content/en/docs%5cinstalling-on-linux%5con-premises%5cinstall-kubesphere-on-vmware-vsphere.md" target="_blank" rel="noopener noreferrer">
                            <ul class="contributor-avatar"></ul>
                        </a>
                        <span class="more-contributor"></span>
                    </div>
                    <div class="mutual-div common-flex-layout">
                        <div class="edit-div">
                            <a href="https://github.com/cnimages/website/edit/master/content/en/docs%5cinstalling-on-linux%5con-premises%5cinstall-kubesphere-on-vmware-vsphere.md" target="_blank" rel="noopener noreferrer">
                                <span class="icon-span"></span>
                                <span>Edit</span>
                            </a>
                        </div>
                        <div class="feedback-div">
                            <a href="https://github.com/cnimages/website/issues/new" target="_blank" rel="noopener noreferrer">
                            <span class="icon-span"></span>
                            <span>Feedback</span>
                            </a>
                        </div>
                        <div class="share-div">
                            <div>
                                <span class="icon-span"></span>
                                <span>Share</span>
                            </div>
                            <ul>
                                <li>
                                    <img src="/images/docs/twitter.svg" alt="twitter">
                                    <a href="http://twitter.com/share?url=https%3a%2f%2fcnimages.github.io%2fwebsite%2fdocs%2finstalling-on-linux%2fon-premises%2finstall-kubesphere-on-vmware-vsphere%2f&text=Deploy%20KubeSphere%20on%20VMware%20vSphere" target="_blank" rel="noopener noreferrer">twitter</a>
                                </li>
                                <li>
                                    <img src="/images/docs/linkedIn.svg" alt="linkedIn">
                                    <a href="http://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2fcnimages.github.io%2fwebsite%2fdocs%2finstalling-on-linux%2fon-premises%2finstall-kubesphere-on-vmware-vsphere%2f" target="_blank" rel="noopener noreferrer">linkedIn</a>
                                </li>
                                <li>
                                    <img src="/images/docs/facebook.svg" alt="facebook">
                                    <a href="http://www.facebook.com/sharer.php?u=https%3a%2f%2fcnimages.github.io%2fwebsite%2fdocs%2finstalling-on-linux%2fon-premises%2finstall-kubesphere-on-vmware-vsphere%2f" target="_blank" rel="noopener noreferrer">facebook</a>
                                </li>
                                <li>
                                    <img src="/images/docs/reddit.svg" alt="reddit">
                                    <a href="http://reddit.com/submit?url=https%3a%2f%2fcnimages.github.io%2fwebsite%2fdocs%2finstalling-on-linux%2fon-premises%2finstall-kubesphere-on-vmware-vsphere%2f&title=Deploy%20KubeSphere%20on%20VMware%20vSphere" target="_blank" rel="noopener noreferrer">reddit</a>
                                </li>
                                <li>
                                    <img src="/images/docs/email.svg" alt="email" >
                                    <a href="mailto:kubesphere@gmail.com" target="_blank" rel="noopener noreferrer">email</a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
    
                <div class="content-div main-div">
                    <div class="md-body">
                        <h1>Deploy KubeSphere on VMware vSphere</h1>
                        <h2 id="introduction">Introduction</h2>
<p>For a production environment, we need to consider the high availability of the cluster. If the key components (e.g. kube-apiserver, kube-scheduler, and kube-controller-manager) are all running on the same master node, Kubernetes and KubeSphere will be unavailable once the master node goes down. Therefore, we need to set up a high-availability cluster by provisioning load balancers with multiple master nodes. You can use any cloud load balancer, or any hardware load balancer (e.g. F5). In addition, Keepalived and <a href="https://www.haproxy.com/" target="_blank" rel="noopener noreferrer">HAProxy</a>, or Nginx is also an alternative for creating high-availability clusters.</p>
<p>This tutorial walks you through an example of how to create Keepalived and HAProxy, and implement high availability of master and etcd nodes using the load balancers.</p>
<h2 id="prerequisites">Prerequisites</h2>
<ul>
<li>Please make sure that you already know how to install KubeSphere with a multi-node cluster by following the <a href="https://github.com/kubesphere/kubekey" target="_blank" rel="noopener noreferrer">guide</a>. For the detailed information about the config yaml file that is used for installation, see <a href="../../../installing-on-linux/introduction/multioverview/">Multi-node Installation</a>. This tutorial focuses more on how to configure load balancers.</li>
<li>You need a VMware vSphere account to create VMs.</li>
<li>Considering data persistence, for a production environment, we recommend you to prepare persistent storage and create a StorageClass in advance. For development and testing, you can use the integrated OpenEBS to provision LocalPV as the storage service directly.</li>
</ul>
<h2 id="architecture">Architecture</h2>
<p><img src="/images/docs/vsphere/kubesphereOnVsphere-zh-architecture.png" alt="Architecture"></p>
<h2 id="prepare-linux-hosts">Prepare Linux Hosts</h2>
<p>This tutorial creates 8 virtual machines of <strong>CentOS Linux release 7.6.1810 (Core)</strong> with the default minimal installation. Every machine has 2 Cores, 4 GB memory and 40 G disk space.</p>
<table>
<thead>
<tr>
<th>Host IP</th>
<th>Host Name</th>
<th>Role</th>
</tr>
</thead>
<tbody>
<tr>
<td>10.10.71.214</td>
<td>master1</td>
<td>master, etcd</td>
</tr>
<tr>
<td>10.10.71.73</td>
<td>master2</td>
<td>master, etcd</td>
</tr>
<tr>
<td>10.10.71.62</td>
<td>master3</td>
<td>master, etcd</td>
</tr>
<tr>
<td>10.10.71.75</td>
<td>node1</td>
<td>worker</td>
</tr>
<tr>
<td>10.10.71.76</td>
<td>node2</td>
<td>worker</td>
</tr>
<tr>
<td>10.10.71.79</td>
<td>node3</td>
<td>worker</td>
</tr>
<tr>
<td>10.10.71.67</td>
<td>vip</td>
<td>vip (No need to create a VM)</td>
</tr>
<tr>
<td>10.10.71.77</td>
<td>lb-0</td>
<td>lb (Keepalived + HAProxy)</td>
</tr>
<tr>
<td>10.10.71.66</td>
<td>lb-1</td>
<td>lb (Keepalived + HAProxy)</td>
</tr>
</tbody>
</table>
<div class="notices warning">
  
  <p>Warning</p>
  <div>You do not need to create a virtual machine for <code>vip</code> (i.e. Virtual IP) above, so only 8 virtual machines need to be created.</div>
</div>
<p>Create virtual machines in the VMware Host Client. You can follow the New Virtual Machine wizard to create a virtual machine to place in the VMware Host Client inventory.</p>
<p><img src="/images/docs/vsphere/kubesphereOnVsphere-en-0-1-create.png" alt="create"></p>
<p>In the first step <strong>Select a creation type</strong>, you can deploy a virtual machine from an OVF or OVA file, or register an existing virtual machine directly.</p>
<p><img src="/images/docs/vsphere/kubesphereOnVsphere-en-0-1-1-create-type.png" alt="kubesphereOnVsphere-en-0-1-1-create-type"></p>
<p>When you create a new virtual machine, provide a unique name for the  virtual machine to distinguish it from existing virtual machines on the  host you are managing.</p>
<p><img src="/images/docs/vsphere/kubesphereOnVsphere-en-0-1-2-name.png" alt="kubesphereOnVsphere-en-0-1-2-name"></p>
<p>Select a compute resource and storage (datastore) for the configuration and disk files. You can select the  datastore that has the most suitable properties, such as size, speed,  and availability, for your virtual machine storage.</p>
<p><img src="/images/docs/vsphere/kubesphereOnVsphere-en-0-1-3-resource.png" alt="kubesphereOnVsphere-en-0-1-3-resource"></p>
<p><img src="/images/docs/vsphere/kubesphereOnVsphere-en-0-1-4-storage.png" alt="kubesphereOnVsphere-en-0-1-4-storage"></p>
<p><img src="/images/docs/vsphere/kubesphereOnVsphere-en-0-1-5-compatibility.png" alt="kubesphereOnVsphere-en-0-1-5-compatibility"></p>
<p>Select a guest operating system. The wizard will provide the appropriate defaults for the operating system installation.</p>
<p><img src="/images/docs/vsphere/kubesphereOnVsphere-en-0-1-6-system.png" alt="kubesphereOnVsphere-en-0-1-6-system"></p>
<p>Before you finish deploying a new virtual machine, you have the option to set <strong>Virtual Hardware</strong> and <strong>VM Options</strong>. You can refer to the images below for part of the fields.</p>
<p><img src="/images/docs/vsphere/kubesphereOnVsphere-en-0-1-7-hardware-1.png" alt="kubesphereOnVsphere-en-0-1-7-hardware-1"></p>
<p><img src="/images/docs/vsphere/kubesphereOnVsphere-en-0-1-7-hardware-2.png" alt="kubesphereOnVsphere-en-0-1-7-hardware-2"></p>
<p><img src="/images/docs/vsphere/kubesphereOnVsphere-en-0-1-7-hardware-3.png" alt="kubesphereOnVsphere-en-0-1-7-hardware-3"></p>
<p><img src="/images/docs/vsphere/kubesphereOnVsphere-en-0-1-7-hardware-4.png" alt="kubesphereOnVsphere-en-0-1-7-hardware-4"></p>
<p>In <strong>Ready to complete</strong> page, you review the configuration selections that you have made for the virtual machine. Click <strong>Finish</strong> at the bottom right corner to continue.</p>
<p><img src="/images/docs/vsphere/kubesphereOnVsphere-en-0-1-8.png" alt="kubesphereOnVsphere-en-0-1-8"></p>
<h2 id="install-a-load-balancer-using-keepalived-and-haproxy-optional">Install a Load Balancer using Keepalived and HAProxy (Optional)</h2>
<p>For a production environment, you have to prepare an external load balancer. If you do not have a load balancer, you can install it using Keepalived and HAProxy. If you are provisioning a development or testing environment, please skip this section.</p>
<h3 id="yum-install">Yum Install</h3>
<p>host lb-0 (10.10.71.77) and host lb-1 (10.10.71.66).</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">yum install keepalived haproxy psmisc -y
</code></pre></div><h3 id="configure-haproxy">Configure HAProxy</h3>
<p>On the servers with IP 10.10.71.77 and 10.10.71.66, configure HAProxy as follows.</p>
<div class="notices note">
  
  <p>Note</p>
  <div>The configuration of the two lb machines is the same. Please pay attention to the backend service address.</div>
</div>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># HAProxy Configure /etc/haproxy/haproxy.cfg</span>
global
    log         127.0.0.1 local2
    chroot      /var/lib/haproxy
    pidfile     /var/run/haproxy.pid
    maxconn     <span style="color:#ae81ff">4000</span>
    user        haproxy
    group       haproxy
    daemon
    <span style="color:#75715e"># turn on stats unix socket</span>
    stats socket /var/lib/haproxy/stats
<span style="color:#75715e">#---------------------------------------------------------------------</span>
<span style="color:#75715e"># common defaults that all the &#39;listen&#39; and &#39;backend&#39; sections will</span>
<span style="color:#75715e"># use if not designated in their block</span>
<span style="color:#75715e">#---------------------------------------------------------------------</span>
defaults
    log                     global
    option                  httplog
    option                  dontlognull
    timeout connect         <span style="color:#ae81ff">5000</span>
    timeout client          <span style="color:#ae81ff">5000</span>
    timeout server          <span style="color:#ae81ff">5000</span>
<span style="color:#75715e">#---------------------------------------------------------------------</span>
<span style="color:#75715e"># main frontend which proxys to the backends</span>
<span style="color:#75715e">#---------------------------------------------------------------------</span>
frontend  kube-apiserver
    bind *:6443
    mode tcp
    option tcplog
    default_backend kube-apiserver
<span style="color:#75715e">#---------------------------------------------------------------------</span>
<span style="color:#75715e"># round robin balancing between the various backends</span>
<span style="color:#75715e">#---------------------------------------------------------------------</span>
backend kube-apiserver
    mode tcp
    option tcplog
    balance     roundrobin
    default-server inter 10s downinter 5s rise <span style="color:#ae81ff">2</span> fall <span style="color:#ae81ff">2</span> slowstart 60s maxconn <span style="color:#ae81ff">250</span> maxqueue <span style="color:#ae81ff">256</span> weight <span style="color:#ae81ff">100</span>
    server kube-apiserver-1 10.10.71.214:6443 check
    server kube-apiserver-2 10.10.71.73:6443 check
    server kube-apiserver-3 10.10.71.62:6443 check
</code></pre></div><p>Check grammar first before you start it.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">haproxy -f /etc/haproxy/haproxy.cfg -c
</code></pre></div><p>Restart HAProxy and execute the command below to enable HAProxy:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">systemctl restart haproxy <span style="color:#f92672">&amp;&amp;</span> systemctl enable haproxy
</code></pre></div><p>Stop HAProxy.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">systemctl stop haproxy
</code></pre></div><h3 id="configure-keepalived">Configure Keepalived</h3>
<p>Main HAProxy 77 lb-0-10.10.71.77 (/etc/keepalived/keepalived.conf).</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">global_defs <span style="color:#f92672">{</span>
  notification_email <span style="color:#f92672">{</span>
  <span style="color:#f92672">}</span>
  smtp_connect_timeout <span style="color:#ae81ff">30</span>   
  router_id LVS_DEVEL01
  vrrp_skip_check_adv_addr
  vrrp_garp_interval <span style="color:#ae81ff">0</span>
  vrrp_gna_interval <span style="color:#ae81ff">0</span>
<span style="color:#f92672">}</span>
vrrp_script chk_haproxy <span style="color:#f92672">{</span>
  script <span style="color:#e6db74">&#34;killall -0 haproxy&#34;</span>
  interval <span style="color:#ae81ff">2</span>
  weight <span style="color:#ae81ff">2</span>
<span style="color:#f92672">}</span>
vrrp_instance haproxy-vip <span style="color:#f92672">{</span>
  state MASTER  
  priority <span style="color:#ae81ff">100</span>  
  interface ens192                       
  virtual_router_id <span style="color:#ae81ff">60</span>
  advert_int <span style="color:#ae81ff">1</span>
  authentication <span style="color:#f92672">{</span>
    auth_type PASS
    auth_pass <span style="color:#ae81ff">1111</span>
  <span style="color:#f92672">}</span>
  unicast_src_ip 10.10.71.77     
  unicast_peer <span style="color:#f92672">{</span>
    10.10.71.66                      
  <span style="color:#f92672">}</span>
  virtual_ipaddress <span style="color:#f92672">{</span>
    <span style="color:#75715e">#vip</span>
    10.10.71.67/24
  <span style="color:#f92672">}</span>
  track_script <span style="color:#f92672">{</span>
    chk_haproxy
  <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><p>Remark HAProxy 66 lb-1-10.10.71.66 (/etc/keepalived/keepalived.conf).</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">global_defs <span style="color:#f92672">{</span>
  notification_email <span style="color:#f92672">{</span>
  <span style="color:#f92672">}</span>
  router_id LVS_DEVEL02
  vrrp_skip_check_adv_addr
  vrrp_garp_interval <span style="color:#ae81ff">0</span>
  vrrp_gna_interval <span style="color:#ae81ff">0</span>
<span style="color:#f92672">}</span>
vrrp_script chk_haproxy <span style="color:#f92672">{</span>
  script <span style="color:#e6db74">&#34;killall -0 haproxy&#34;</span>
  interval <span style="color:#ae81ff">2</span>
  weight <span style="color:#ae81ff">2</span>
<span style="color:#f92672">}</span>
vrrp_instance haproxy-vip <span style="color:#f92672">{</span>
  state BACKUP
  priority <span style="color:#ae81ff">90</span>
  interface ens192                        
  virtual_router_id <span style="color:#ae81ff">60</span>
  advert_int <span style="color:#ae81ff">1</span>
  authentication <span style="color:#f92672">{</span>
    auth_type PASS
    auth_pass <span style="color:#ae81ff">1111</span>
  <span style="color:#f92672">}</span>
  unicast_src_ip 10.10.71.66      
  unicast_peer <span style="color:#f92672">{</span>
    10.10.71.77                        
  <span style="color:#f92672">}</span>
  virtual_ipaddress <span style="color:#f92672">{</span>
    10.10.71.67/24
  <span style="color:#f92672">}</span>
  track_script <span style="color:#f92672">{</span>
    chk_haproxy
  <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><p>Start keepalived and enable keepalived.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">systemctl restart keepalived <span style="color:#f92672">&amp;&amp;</span> systemctl enable keepalived   
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">systemctl stop keepaliv
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">systemctl start keepalived
</code></pre></div><h3 id="verify-availability">Verify Availability</h3>
<p>Use <code>ip a s</code> to view the vip binding status of each lb node:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">ip a s
</code></pre></div><p>Pause VIP node HAProxy through the following command:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">systemctl stop haproxy
</code></pre></div><p>Use <code>ip a s</code> again to check the vip binding of each lb node, and check whether vip drifts:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">ip a s
</code></pre></div><p>Alternatively, use the command below:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">systemctl status -l keepalived
</code></pre></div><h2 id="download-kubekey">Download KubeKey</h2>
<p><a href="https://github.com/kubesphere/kubekey" target="_blank" rel="noopener noreferrer">Kubekey</a> is the next-gen installer which provides an easy, fast and flexible way to install Kubernetes and KubeSphere v3.0.0.</p>
<p>Follow the step below to download KubeKey.</p>
<div class="code-tabs">
  <ul class="nav nav-tabs"></ul>
  <div class="tab-content">

<div class="tab-pane" title="For users with good network connections to GitHub">
  <p>Download KubeKey from <a href="https://github.com/kubesphere/kubekey/releases/tag/v1.0.0">GitHub Release Page</a> or use the following command directly.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">wget https://github.com/kubesphere/kubekey/releases/download/v1.0.0/kubekey-v1.0.0-linux-amd64.tar.gz -O - | tar -xz
</code></pre></div>
</div>

<div class="tab-pane" title="For users with poor network connections to GitHub">
  <p>Download KubeKey using the following command:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">wget -c https://kubesphere.io/download/kubekey-v1.0.0-linux-amd64.tar.gz -O - | tar -xz
</code></pre></div>
</div>

</div>
</div>
<p>Make <code>kk</code> executable:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">chmod +x kk
</code></pre></div><h2 id="create-a-multi-node-cluster">Create a Multi-node Cluster</h2>
<p>With KubeKey, you can install Kubernetes and KubeSphere together. You have the option to create a multi-node cluster by customizing parameters in the configuration file.</p>
<p>Create a Kubernetes cluster with KubeSphere installed (e.g. <code>--with-kubesphere v3.0.0</code>):</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">./kk create config --with-kubernetes v1.17.9 --with-kubesphere v3.0.0
</code></pre></div><div class="notices note">
  
  <p>Note</p>
  <div>The following Kubernetes versions have been fully tested with KubeSphere: v1.15.12, v1.16.13, v1.17.9 (default) and v1.18.6.</div>
</div>
<p>A default file <strong>config-sample.yaml</strong> will be created. Modify it according to your environment.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">vi config-sample.yaml
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#66d9ef">apiVersion</span>: kubekey.kubesphere.io/v1alpha1
<span style="color:#66d9ef">kind</span>: Cluster
<span style="color:#66d9ef">metadata</span>:
  <span style="color:#66d9ef">name</span>: config-sample
<span style="color:#66d9ef">spec</span>:
  <span style="color:#66d9ef">hosts</span>:
  - {<span style="color:#66d9ef">name: master1, address: 10.10.71.214, internalAddress: 10.10.71.214, password</span>: P@ssw0rd!}
  - {<span style="color:#66d9ef">name: master2, address: 10.10.71.73, internalAddress: 10.10.71.73, password</span>: P@ssw0rd!}
  - {<span style="color:#66d9ef">name: master3, address: 10.10.71.62, internalAddress: 10.10.71.62, password</span>: P@ssw0rd!}
  - {<span style="color:#66d9ef">name: node1, address: 10.10.71.75, internalAddress: 10.10.71.75, password</span>: P@ssw0rd!}
  - {<span style="color:#66d9ef">name: node2, address: 10.10.71.76, internalAddress: 10.10.71.76, password</span>: P@ssw0rd!}
  - {<span style="color:#66d9ef">name: node3, address: 10.10.71.79, internalAddress: 10.10.71.79, password</span>: P@ssw0rd!}
  <span style="color:#66d9ef">roleGroups</span>:
    <span style="color:#66d9ef">etcd</span>:
    - master1
    - master2
    - master3
    <span style="color:#66d9ef">master</span>:
    - master1
    - master2
    - master3
    <span style="color:#66d9ef">worker</span>:
    - node1
    - node2
    - node3
  <span style="color:#66d9ef">controlPlaneEndpoint</span>:
    <span style="color:#66d9ef">domain</span>: lb.kubesphere.local
    <span style="color:#75715e"># vip</span>
    <span style="color:#66d9ef">address</span>: <span style="color:#e6db74">&#34;10.10.71.67&#34;</span>                    
    <span style="color:#66d9ef">port</span>: <span style="color:#e6db74">&#34;6443&#34;</span>
  <span style="color:#66d9ef">kubernetes</span>:
    <span style="color:#66d9ef">version</span>: v1<span style="color:#ae81ff">.17.9</span>
    <span style="color:#66d9ef">imageRepo</span>: kubesphere
    <span style="color:#66d9ef">clusterName</span>: cluster.local
    <span style="color:#66d9ef">masqueradeAll: false  # masqueradeAll tells kube-proxy to SNAT everything if using the pure iptables proxy mode. [Default</span>: <span style="color:#66d9ef">false</span>]
    <span style="color:#66d9ef">maxPods: 110  # maxPods is the number of pods that can run on this Kubelet. [Default</span>: <span style="color:#ae81ff">110</span>]
    <span style="color:#66d9ef">nodeCidrMaskSize: 24  # internal network node size allocation. This is the size allocated to each node on your network. [Default</span>: <span style="color:#ae81ff">24</span>]
    <span style="color:#66d9ef">proxyMode: ipvs  # mode specifies which proxy mode to use. [Default</span>: ipvs]
  <span style="color:#66d9ef">network</span>:
    <span style="color:#66d9ef">plugin</span>: calico
    <span style="color:#66d9ef">calico</span>:
      <span style="color:#66d9ef">ipipMode</span>: Always  <span style="color:#75715e"># IPIP Mode to use for the IPv4 POOL created at start up. If set to a value other than Never, vxlanMode should be set to &#34;Never&#34;. [Always | CrossSubnet | Never] [Default: Always]</span>
      <span style="color:#66d9ef">vxlanMode</span>: Never  <span style="color:#75715e"># VXLAN Mode to use for the IPv4 POOL created at start up. If set to a value other than Never, ipipMode should be set to &#34;Never&#34;. [Always | CrossSubnet | Never] [Default: Never]</span>
      <span style="color:#66d9ef">vethMTU: 1440  # The maximum transmission unit (MTU) setting determines the largest packet size that can be transmitted through your network. [Default</span>: <span style="color:#ae81ff">1440</span>]
    <span style="color:#66d9ef">kubePodsCIDR</span>: <span style="color:#ae81ff">10.233.64.0</span>/<span style="color:#ae81ff">18</span>
    <span style="color:#66d9ef">kubeServiceCIDR</span>: <span style="color:#ae81ff">10.233.0.0</span>/<span style="color:#ae81ff">18</span>
  <span style="color:#66d9ef">registry</span>:
    <span style="color:#66d9ef">registryMirrors</span>: []
    <span style="color:#66d9ef">insecureRegistries</span>: []
    <span style="color:#66d9ef">privateRegistry</span>: <span style="color:#e6db74">&#34;&#34;</span>
  <span style="color:#66d9ef">storage</span>:
    <span style="color:#66d9ef">defaultStorageClass</span>: localVolume
    <span style="color:#66d9ef">localVolume</span>:
      <span style="color:#66d9ef">storageClassName</span>: local  

---
<span style="color:#66d9ef">apiVersion</span>: installer.kubesphere.io/v1alpha1
<span style="color:#66d9ef">kind</span>: ClusterConfiguration
<span style="color:#66d9ef">metadata</span>:
  <span style="color:#66d9ef">name</span>: ks-installer
  <span style="color:#66d9ef">namespace</span>: kubesphere-system
  <span style="color:#66d9ef">labels</span>:
    <span style="color:#66d9ef">version</span>: v3<span style="color:#ae81ff">.0.0</span>
<span style="color:#66d9ef">spec</span>:
  <span style="color:#66d9ef">local_registry</span>: <span style="color:#e6db74">&#34;&#34;</span>
  <span style="color:#66d9ef">persistence</span>:
    <span style="color:#66d9ef">storageClass</span>: <span style="color:#e6db74">&#34;&#34;</span>
  <span style="color:#66d9ef">authentication</span>:
    <span style="color:#66d9ef">jwtSecret</span>: <span style="color:#e6db74">&#34;&#34;</span>
  <span style="color:#66d9ef">etcd</span>:
    <span style="color:#66d9ef">monitoring</span>: <span style="color:#66d9ef">true</span>        <span style="color:#75715e"># Whether to install etcd monitoring dashboard</span>
    <span style="color:#66d9ef">endpointIps</span>: <span style="color:#ae81ff">192.168.0.7</span>,<span style="color:#ae81ff">192.168.0.8</span>,<span style="color:#ae81ff">192.168.0.9</span>  <span style="color:#75715e"># etcd cluster endpointIps</span>
    <span style="color:#66d9ef">port</span>: <span style="color:#ae81ff">2379</span>              <span style="color:#75715e"># etcd port</span>
    <span style="color:#66d9ef">tlsEnable</span>: <span style="color:#66d9ef">true</span>
  <span style="color:#66d9ef">common</span>:
    <span style="color:#66d9ef">mysqlVolumeSize</span>: 20Gi <span style="color:#75715e"># MySQL PVC size</span>
    <span style="color:#66d9ef">minioVolumeSize</span>: 20Gi <span style="color:#75715e"># Minio PVC size</span>
    <span style="color:#66d9ef">etcdVolumeSize</span>: 20Gi  <span style="color:#75715e"># etcd PVC size</span>
    <span style="color:#66d9ef">openldapVolumeSize</span>: 2Gi   <span style="color:#75715e"># openldap PVC size</span>
    <span style="color:#66d9ef">redisVolumSize</span>: 2Gi <span style="color:#75715e"># Redis PVC size</span>
    <span style="color:#66d9ef">es</span>:  <span style="color:#75715e"># Storage backend for logging, tracing, events and auditing.</span>
      <span style="color:#66d9ef">elasticsearchMasterReplicas</span>: <span style="color:#ae81ff">1</span>   <span style="color:#75715e"># total number of master nodes, it&#39;s not allowed to use even number</span>
      <span style="color:#66d9ef">elasticsearchDataReplicas</span>: <span style="color:#ae81ff">1</span>     <span style="color:#75715e"># total number of data nodes</span>
      <span style="color:#66d9ef">elasticsearchMasterVolumeSize</span>: 4Gi   <span style="color:#75715e"># Volume size of Elasticsearch master nodes</span>
      <span style="color:#66d9ef">elasticsearchDataVolumeSize</span>: 20Gi    <span style="color:#75715e"># Volume size of Elasticsearch data nodes</span>
      <span style="color:#66d9ef">logMaxAge</span>: <span style="color:#ae81ff">7</span>                     <span style="color:#75715e"># Log retention time in built-in Elasticsearch, it is 7 days by default.</span>
      <span style="color:#66d9ef">elkPrefix</span>: logstash              <span style="color:#75715e"># The string making up index names. The index name will be formatted as ks-&lt;elk_prefix&gt;-log</span>
      <span style="color:#75715e"># externalElasticsearchUrl:</span>
      <span style="color:#75715e"># externalElasticsearchPort:</span>
  <span style="color:#66d9ef">console</span>:
    <span style="color:#66d9ef">enableMultiLogin</span>: <span style="color:#66d9ef">false</span>  <span style="color:#75715e"># enable/disable multiple sing on, it allows an account can be used by different users at the same time.</span>
    <span style="color:#66d9ef">port</span>: <span style="color:#ae81ff">30880</span>
  <span style="color:#66d9ef">alerting</span>:                <span style="color:#75715e"># Whether to install KubeSphere alerting system. It enables Users to customize alerting policies to send messages to receivers in time with different time intervals and alerting levels to choose from.</span>
    <span style="color:#66d9ef">enabled</span>: <span style="color:#66d9ef">false</span>
  <span style="color:#66d9ef">auditing</span>:                <span style="color:#75715e"># Whether to install KubeSphere audit log system. It provides a security-relevant chronological set of records，recording the sequence of activities happened in platform, initiated by different tenants.</span>
    <span style="color:#66d9ef">enabled</span>: <span style="color:#66d9ef">false</span>         
  <span style="color:#66d9ef">devops</span>:                  <span style="color:#75715e"># Whether to install KubeSphere DevOps System. It provides out-of-box CI/CD system based on Jenkins, and automated workflow tools including Source-to-Image &amp; Binary-to-Image</span>
    <span style="color:#66d9ef">enabled</span>: <span style="color:#66d9ef">false</span>
    <span style="color:#66d9ef">jenkinsMemoryLim</span>: 2Gi      <span style="color:#75715e"># Jenkins memory limit</span>
    <span style="color:#66d9ef">jenkinsMemoryReq</span>: 1500Mi   <span style="color:#75715e"># Jenkins memory request</span>
    <span style="color:#66d9ef">jenkinsVolumeSize</span>: 8Gi     <span style="color:#75715e"># Jenkins volume size</span>
    <span style="color:#66d9ef">jenkinsJavaOpts_Xms</span>: 512m  <span style="color:#75715e"># The following three fields are JVM parameters</span>
    <span style="color:#66d9ef">jenkinsJavaOpts_Xmx</span>: 512m
    <span style="color:#66d9ef">jenkinsJavaOpts_MaxRAM</span>: 2g
  <span style="color:#66d9ef">events</span>:                  <span style="color:#75715e"># Whether to install KubeSphere events system. It provides a graphical web console for Kubernetes Events exporting, filtering and alerting in multi-tenant Kubernetes clusters.</span>
    <span style="color:#66d9ef">enabled</span>: <span style="color:#66d9ef">false</span>
  <span style="color:#66d9ef">logging</span>:                 <span style="color:#75715e"># Whether to install KubeSphere logging system. Flexible logging functions are provided for log query, collection and management in a unified console. Additional log collectors can be added, such as Elasticsearch, Kafka and Fluentd.</span>
    <span style="color:#66d9ef">enabled</span>: <span style="color:#66d9ef">false</span>
    <span style="color:#66d9ef">logsidecarReplicas</span>: <span style="color:#ae81ff">2</span>
  <span style="color:#66d9ef">metrics_server</span>:                    <span style="color:#75715e"># Whether to install metrics-server. IT enables HPA (Horizontal Pod Autoscaler).</span>
    <span style="color:#66d9ef">enabled</span>: <span style="color:#66d9ef">true</span>
  <span style="color:#66d9ef">monitoring</span>:                        <span style="color:#75715e">#</span>
    <span style="color:#66d9ef">prometheusReplicas</span>: <span style="color:#ae81ff">1</span>            <span style="color:#75715e"># Prometheus replicas are responsible for monitoring different segments of data source and provide high availability as well.</span>
    <span style="color:#66d9ef">prometheusMemoryRequest</span>: 400Mi   <span style="color:#75715e"># Prometheus request memory</span>
    <span style="color:#66d9ef">prometheusVolumeSize</span>: 20Gi       <span style="color:#75715e"># Prometheus PVC size</span>
    <span style="color:#66d9ef">alertmanagerReplicas</span>: <span style="color:#ae81ff">1</span>          <span style="color:#75715e"># AlertManager Replicas</span>
  <span style="color:#66d9ef">multicluster</span>:
    <span style="color:#66d9ef">clusterRole</span>: none  <span style="color:#75715e"># host | member | none  # You can install a solo cluster, or specify it as the role of host or member cluster</span>
  <span style="color:#66d9ef">networkpolicy</span>:       <span style="color:#75715e"># Network policies allow network isolation within the same cluster, which means firewalls can be set up between certain instances (Pods).</span>
    <span style="color:#66d9ef">enabled</span>: <span style="color:#66d9ef">false</span>     
  <span style="color:#66d9ef">notification</span>:        <span style="color:#75715e"># It supports notification management in multi-tenant Kubernetes clusters. It allows you to set AlertManager as its sender, and receivers include Email, Wechat Work, and Slack.</span>
    <span style="color:#66d9ef">enabled</span>: <span style="color:#66d9ef">false</span>
  <span style="color:#66d9ef">openpitrix</span>:          <span style="color:#75715e"># Whether to install KubeSphere App Store. It provides an application store for Helm-based applications, and offer application lifecycle management</span>
    <span style="color:#66d9ef">enabled</span>: <span style="color:#66d9ef">false</span>
  <span style="color:#66d9ef">servicemesh</span>:         <span style="color:#75715e"># Whether to install KubeSphere Service Mesh (Istio-based). It provides fine-grained traffic management, observability and tracing, and offer visualization for traffic topology</span>
    <span style="color:#66d9ef">enabled</span>: <span style="color:#66d9ef">false</span>
</code></pre></div><p>Create a cluster using the configuration file you customized above:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">./kk create cluster -f config-sample.yaml
</code></pre></div><h4 id="verify-the-multi-node-installation">Verify the Multi-node Installation</h4>
<p>Inspect the logs of installation by executing the command below:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">kubectl logs -n kubesphere-system <span style="color:#66d9ef">$(</span>kubectl get pod -n kubesphere-system -l app<span style="color:#f92672">=</span>ks-install -o jsonpath<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;{.items[0].metadata.name}&#39;</span><span style="color:#66d9ef">)</span> -f
</code></pre></div><p>If you can see the welcome log return, it means the installation is successful. Your cluster is up and running.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">**************************************************
<span style="color:#75715e">#####################################################</span>
<span style="color:#75715e">###              Welcome to KubeSphere!           ###</span>
<span style="color:#75715e">#####################################################</span>
Console: http://10.10.71.214:30880
Account: admin
Password: P@88w0rd
NOTES：
  1. After logging into the console, please check the
     monitoring status of service components in
     the <span style="color:#e6db74">&#34;Cluster Management&#34;</span>. If any service is not
     ready, please wait patiently <span style="color:#66d9ef">until</span> all components
     are ready.
  2. Please modify the default password after login.
<span style="color:#75715e">#####################################################</span>
https://kubesphere.io             2020-08-15 23:32:12
<span style="color:#75715e">#####################################################</span>
</code></pre></div><h4 id="log-in-the-console">Log in the Console</h4>
<p>You will be able to use default account and password <code>admin/P@88w0rd</code> to log in the console <code>http://{$IP}:30880</code> to take a tour of KubeSphere. Please change the default password after login.</p>
<h4 id="enable-pluggable-components-optional">Enable Pluggable Components (Optional)</h4>
<p>The example above demonstrates the process of a default minimal installation. To enable other components in KubeSphere, see <a href="../../../pluggable-components/">Enable Pluggable Components</a> for more details.</p>

                    </div>
                </div>
                
                
                <div class="page-div common-flex-layout">
                    
                    
                        <a class="last" href="/website/docs/project-user-guide/application-workloads/daemonsets/">
                            <img src="/images/docs/last.svg" alt="Previous">
                            Previous
                            <span>: DaemonSets</span>
                        </a>
                    
                    
                    
                    
                        <a class="next" href="/website/docs/project-user-guide/application-workloads/services/">
                            Next
                            <span>: Services</span>
                            <img src="/images/docs/next.svg" alt="Next">
                        </a>            
                    
                    
                </div>
                
                <div></div>
            </div>
            
            <div class="aside">
                <div class="inner-div">
                    <div class='title'>
                        What’s on this Page
                    </div>
                    <div class='tabs'>
                        <nav id="TableOfContents">
  <ul>
    <li><a href="#introduction">Introduction</a></li>
    <li><a href="#prerequisites">Prerequisites</a></li>
    <li><a href="#architecture">Architecture</a></li>
    <li><a href="#prepare-linux-hosts">Prepare Linux Hosts</a></li>
    <li><a href="#install-a-load-balancer-using-keepalived-and-haproxy-optional">Install a Load Balancer using Keepalived and HAProxy (Optional)</a>
      <ul>
        <li><a href="#yum-install">Yum Install</a></li>
        <li><a href="#configure-haproxy">Configure HAProxy</a></li>
        <li><a href="#configure-keepalived">Configure Keepalived</a></li>
        <li><a href="#verify-availability">Verify Availability</a></li>
      </ul>
    </li>
    <li><a href="#download-kubekey">Download KubeKey</a></li>
    <li><a href="#create-a-multi-node-cluster">Create a Multi-node Cluster</a>
      <ul>
        <li></li>
      </ul>
    </li>
  </ul>
</nav>
                    </div>
                </div>
            </div>
            
        </div>
    </section>
    
    
    <script type="text/javascript" src="/website/js/aside.34d4ca232760855916fede489417772adb45cdceab8541c6f6826e5d83a0b68e071a44f76a077fe90e39afe213cc1aab40272900f7cbdffb45068c7746c7b183.js" integrity="sha512-NNTKIydghVkW/t5IlBd3KttFzc6rhUHG9oJuXYOgto4HGkT3agd/6Q45r&#43;ITzBqrQCcpAPfL3/tFBox3Rsexgw=="></script>
    
    
    
    <script type="text/javascript" src="/website/js/markdown-tab.224c8a343197870e80877ad07e19b932b807d3fde3abccde667f2156378cb00497ebb11d2f872f09ea91e7282e87655f8cb4ef163da46e34d00dca44dbf52aad.js" integrity="sha512-IkyKNDGXhw6Ah3rQfhm5MrgH0/3jq8zeZn8hVjeMsASX67EdL4cvCeqR5yguh2VfjLTvFj2kbjTQDcpE2/UqrQ=="></script>
    
    <script>
        var languageCode = 'en'
        var filePath = 'docs\\installing-on-linux\\on-premises\\install-kubesphere-on-vmware-vsphere.md'
        var githubUrl = 'https:\/\/github.com\/cnimages\/website'
        
    
        var getLatestTime = function(data) {
            var commit = data[0].commit
            return commit.author.date.replace("T", " ").replace("Z", "")
        }
    
        var filterData = function(data) {
            var arr = []
            var length = data.length
            for (var i = 0; i < length; i++) {
                var author = data[i].author
                if (author) {
                    var avatar_url = author.avatar_url
                    if (avatar_url && !arr.includes(avatar_url)) {
                        arr.push(avatar_url)
                    }
                }
    
            }
            return arr
        }
        var getFileContributors = function() {
            var url = 'https://api.github.com/repos/kubesphere/website/commits?path=content/' + languageCode + '/' + filePath
            $.getJSON(url, function(data) {
                if (!data || data.length === 0) {
                    $('.contributor-div').hide()
                    return
                }
                var newData = filterData(data)
                var time = getLatestTime(data)
                renderLatestTime(time)
                renderContributors(newData)
            })
        }
        var renderContributors = function(data) {
            var contributor = $('.contributor-avatar')
            var length = data.length
            var len = 5
            $.each(data.slice(0, len), function(index, item) {
                var img = $("<img />", {
                    "src": item
                })
                $("<li />", {
                    "html": img
                }).appendTo(contributor);
            });
            var t = length - len
            if (t > 0) {
                $('.more-contributor').html('+' + t)
            }
        }
    
        var renderLatestTime = function(time) {
            $('.update-time').html(time)
        }
    
        var bindClickMenu = function() {
            var sectionMenu = $(".section-menu")
            $('.section-control').on('click', function(e){
                if (sectionMenu.is(":hidden")) {
                    sectionMenu.show();
                } else {
                    sectionMenu.hide()
                }
    
                $(document).one("click", function(){
                    sectionMenu.hide()
                });
    
                e.stopPropagation()
            })
    
            sectionMenu.on("click", function(e){
                e.stopPropagation();
            })
        }
    
        var bindClickSecondMenu = function() {
            var sectionMenu = $(".section-2 .left-div")
            $('.second-section-menu').on('click', function(e){
                sectionMenu.css("left", "0")
    
                $(document).one("click", function(){
                    sectionMenu.css("left", "-274px")
                });
    
                e.stopPropagation()
            })
    
            sectionMenu.on("click", function(e){
                e.stopPropagation();
            })
        }
    
        var useViewer = function() {
            var viewer = new Viewer(document.querySelector('.md-body'), {
                url: 'src'
            })
        }
    
        var __main = function() {
            getFileContributors()
            bindClickMenu()
            bindClickSecondMenu()
            useViewer()
        }
    
        __main()
    
    </script>
</main>

<footer>
    <div class="down-main">
        <div class='img-div'>
            <a class='wechat' href="javascript:void(0);">
                <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="28" height="28" viewBox="0 0 28 28">
    <defs>
        <path id="a" d="M0 0h15.673v12.156H0z"/>
    </defs>
    <g fill="none" fill-rule="evenodd" transform="translate(1 1)">
        <circle cx="13" cy="13" r="13" stroke="#B6C2CD"/>
        <g transform="translate(5 7)">
            <mask id="b" fill="#fff">
                <use xlink:href="#a"/>
            </mask>
            <path fill="currentColor" d="M15.673 7.898c0-2.061-2.173-3.74-4.619-3.74-2.59 0-4.625 1.679-4.625 3.74 0 2.066 2.035 3.738 4.625 3.738.542 0 1.09-.13 1.632-.256l1.493.776-.408-1.29c1.09-.776 1.902-1.81 1.902-2.968zm-6.119-.645c-.27 0-.541-.257-.541-.514 0-.256.27-.514.541-.514.41 0 .681.258.681.514 0 .257-.271.514-.681.514zm2.994 0c-.27 0-.541-.257-.541-.514 0-.256.27-.514.54-.514.41 0 .681.258.681.514 0 .257-.277.514-.68.514z" mask="url(#b)"/>
            <path fill="currentColor" d="M10.602 3.674c.177 0 .356.011.533.029C10.657 1.576 8.27 0 5.543 0 2.498 0 0 1.974 0 4.485c0 1.45.829 2.64 2.216 3.564l-.552 1.588 1.94-.929c.693.129 1.251.263 1.94.263.17 0 .343-.005.515-.022a3.68 3.68 0 0 1-.172-1.104c0-2.302 2.081-4.171 4.715-4.171zM7.618 2.243c.417 0 .693.263.693.66s-.276.66-.693.66c-.418 0-.835-.263-.835-.66.006-.398.423-.66.835-.66zm-3.88 1.319c-.417 0-.834-.263-.834-.66s.417-.66.834-.66c.418 0 .695.263.695.66 0 .392-.277.66-.695.66z" mask="url(#b)"/>
        </g>
    </g>
</svg>

                <div class="hide-div">
                    <p>Follow the official account</p>
                    <img src="/images/footer/wechat_code.svg" alt="">
                </div>
            </a>
            <a class='facebook-a' href="https://www.facebook.com/kubesphere" target="_blank"></a>
            <a class='twitter-a' href="https://twitter.com/KubeSphere" target="_blank" rel="noopener noreferrer"></a>
            <a class='linkedin-a' href="https://www.linkedin.com/company/kubesphere/" target="_blank" rel="noopener noreferrer"></a>
            <a class='youtube-a' href="https://www.youtube.com/channel/UCyTdUQUYjf7XLjxECx63Hpw" target="_blank" rel="noopener noreferrer"></a>
            <a class='slack-a' href="https://join.slack.com/t/kubesphere/shared_invite/enQtNTE3MDIxNzUxNzQ0LTZkNTdkYWNiYTVkMTM5ZThhODY1MjAyZmVlYWEwZmQ3ODQ1NmM1MGVkNWEzZTRhNzk0MzM5MmY4NDc3ZWVhMjE" target="_blank" rel="noopener noreferrer"></a>
            <a class='github-a' href="https://github.com/cnimages/kubesphere" target="_blank" rel="noopener noreferrer"></a>
            <a class='medium-a' href="https://itnext.io/@kubesphere" target="_blank" rel="noopener noreferrer"></a>
        </div>
        <p class='p1'>KubeSphere®️ 2020 All Rights Reserved.</p>
    </div>
</footer>
</body>

</html>