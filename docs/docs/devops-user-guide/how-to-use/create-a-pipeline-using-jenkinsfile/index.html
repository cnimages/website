<!DOCTYPE html>
<html lang="en-US">
<head>
<meta charset="utf-8">
<title>Create a Pipeline Using a Jenkinsfile</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="description" content="How to create a pipeline using a Jenkinsfile.">
<meta name="keywords" content="KubeSphere, Kubernetes, docker, spring boot, Jenkins, devops, ci/cd, pipeline">

<meta property="og:type" content="article"/>
<meta property="og:title" content="Create a Pipeline Using a Jenkinsfile"/>
<meta property="og:description" content="How to create a pipeline using a Jenkinsfile."/>
<meta property="og:image" content="https://cnimages.github.io/images/common/snapshot-en.png"/>
<meta property="og:url" content="https://cnimages.github.io/website/docs/devops-user-guide/how-to-use/create-a-pipeline-using-jenkinsfile/"/>

<meta name="docsearch:language" content="en-US" /><link rel="stylesheet" href="/fonts/Roboto/stylesheet.css">
<link rel="stylesheet" href="/fonts/ProximaNova/stylesheet.css">
<link rel="stylesheet" href="/css/jquery.modal.min.css">
<link rel="stylesheet" href="/css/viewer.min.css">


<link rel="stylesheet" href="/website/scss/common.min.fd2f2584615728a729ee87ecf658d2f2e62d4c55dc6ca4c90029116aa21ee2e8.css">









<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css">


<link rel="stylesheet" href="/website/scss/doc.min.7723111c35b5fc4449bfc0d9f2cf1dd6823ae712e792e1d40a0baabf350dccd3.css">




<script src='/website/js/jquery-3.5.0.min.js'></script>
<script src='/website/js/viewer.min.js'></script>
<script src='/website/js/jquery.modal.min.js'></script>


<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>









<script type='text/javascript'>
!function(e,t,n,g,i){e[i]=e[i]||function(){(e[i].q=e[i].q||[]).push(arguments)},n=t.createElement("script"),tag=t.getElementsByTagName("script")[0],n.async=1,n.src=('https:'==document.location.protocol?'https://':'http://')+g,tag.parentNode.insertBefore(n,tag)}(window,document,"script","assets.giocdn.com/2.1/gio.js","gio");
  gio('init', '8a24ae300cbf8b8c', {});
  
  
  gio('send');
</script>




</head>

<body>

<header class="navigation">
    
    <div class="common-layout">
        <div class="header-container">
            <a href="/website/">
                <img src="/images/header/logo.svg" alt="" class="logo">
            </a>

            <ul class="nav">
                
                
                

                
                
                    
                
                    
                
                    
                

                <li  class="menu-li" >
                    <span class='menu-span'>Scenarios</span>
                    <ul class="dropdown-menu menu-2">
                        
                        <li >
                            
                            <a href="/website/devops/">Embracing One-stop DevOps Workflow</a>
                            
                        </li>
                        
                        <li >
                            
                            <a href="/website/service-mesh/">Running Microservices on Kubernetes</a>
                            
                        </li>
                        
                        <li >
                            
                            <a href="/website/observability/">Building Cloud Native Observability</a>
                            
                        </li>
                        
                    </ul>
                </li>
                

                
                

                
                
                    
                
                    
                
                    
                
                    
                

                <li  class="menu-li" >
                    <span class='menu-span'>Resources</span>
                    <ul class="dropdown-menu menu-3">
                        
                        <li >
                            
                            <a href="/website/projects/">Open Source Projects</a>
                            
                        </li>
                        
                        <li >
                            
                            <a href="/website/conferences/">KubeCon & QCon</a>
                            
                        </li>
                        
                        <li >
                            
                            <a href="/website/blogs/">Technology Blogs</a>
                            
                        </li>
                        
                        <li >
                            
                            <a href="/website/videos/">Video Resources</a>
                            
                        </li>
                        
                    </ul>
                </li>
                

                
                

                
                
                    
                
                    
                
                    
                
                    
                

                <li  class="menu-li" >
                    <span class='menu-span'>Documentation</span>
                    <ul class="dropdown-menu menu-4">
                        
                        <li >
                            
                            <a href="/website/docs/">v3.0.0 <img src='/images/header/star.svg' alt='star'></a>
                            
                        </li>
                        
                        <li >
                            
                            <a href="https://v2-1.docs.kubesphere.io/docs" target="_blank" rel="noopener noreferrer">v2.1.x</a>
                            
                        </li>
                        
                        <li >
                            
                            <a href="https://v2-0.docs.kubesphere.io/docs/" target="_blank" rel="noopener noreferrer">v2.0.x</a>
                            
                        </li>
                        
                        <li >
                            
                            <a href="https://v1-0.docs.kubesphere.io/docs/" target="_blank" rel="noopener noreferrer">v1.0.0</a>
                            
                        </li>
                        
                    </ul>
                </li>
                

                
                

                
                
                    
                
                    
                
                    
                
                    
                
                    
                

                <li  class="menu-li" >
                    <span class='menu-span'>Community</span>
                    <ul class="dropdown-menu menu-5">
                        
                        <li >
                            
                            <a href="/website/contribution/">Contribution</a>
                            
                        </li>
                        
                        <li >
                            
                            <a href="/website/case/">Case Studies</a>
                            
                        </li>
                        
                        <li >
                            
                            <a href="/website/partner/">Partner</a>
                            
                        </li>
                        
                        <li >
                            
                            <a href="/website/news/">News</a>
                            
                        </li>
                        
                        <li >
                            
                            <a href="https://github.com/cnimages/kubesphere/blob/master/docs/roadmap.md" target="_blank" rel="noopener noreferrer">RoadMap</a>
                            
                        </li>
                        
                    </ul>
                </li>
                

                

            </ul>
            <div class="right-menu">
                <ul>
                    <li class="language-menu">
                        <div>
                            <img src="/images/header/black.svg" alt="">
                            <span>English</span>
                        </div>
                        
                        <ul class="dropdown-menu">
                            
                            <li onclick="location = '\/website\/docs\/devops-user-guide\/how-to-use\/create-a-pipeline-using-jenkinsfile\/'">English</li>
                            
                        </ul>
                        
                    </li>
                    <li class='btn-li'>
                        <a href="https://demo.kubesphere.io/login" target="_blank" rel="noopener noreferrer">
                            <button class="demo-btn">Demo →</button>
                        </a>
                        <ol class="dropdown-menu">
                            <li>1.Experience account: demo1 / Demo123</li>
                            <li>2.This account is only allowed to view parts of UI</li>
                            <li>3.It&#39;s recommended that install KubeSphere in your environment</li>
                        </ol>
                    </li>
                    <li class='link-li'>
                        <a class='link-1' href="https://join.slack.com/t/kubesphere/shared_invite/enQtNTE3MDIxNzUxNzQ0LTZkNTdkYWNiYTVkMTM5ZThhODY1MjAyZmVlYWEwZmQ3ODQ1NmM1MGVkNWEzZTRhNzk0MzM5MmY4NDc3ZWVhMjE" target="_blank" rel="noopener noreferrer"></a>
                        <a class='link-2' href="https://twitter.com/KubeSphere" target="_blank" rel="noopener noreferrer"></a>
                        <a class='link-3' href="https://github.com/cnimages/kubesphere" target="_blank" rel="noopener noreferrer"></a>
                    </li>
                    <li class="menu-icon">
                        <img src="/images/header/menu.svg" alt="">
                    </li>
                </ul>
            </div>
        </div>
    </div>

    <div id="modal-for-menu" class="modal">
        <ul class="nav">
            
            
            

            
            
                
            
                
            
                
            

            <li data-check="0"  class="menu-li" >
                <span class='menu-span'>Scenarios</span>
                <ul class="dropdown-menu">
                    
                    <li >
                        <a href="/website/devops/">Embracing One-stop DevOps Workflow</a>
                    </li>
                    
                    <li >
                        <a href="/website/service-mesh/">Running Microservices on Kubernetes</a>
                    </li>
                    
                    <li >
                        <a href="/website/observability/">Building Cloud Native Observability</a>
                    </li>
                    
                </ul>
            </li>
            

            
            

            
            
                
            
                
            
                
            
                
            

            <li data-check="0"  class="menu-li" >
                <span class='menu-span'>Resources</span>
                <ul class="dropdown-menu">
                    
                    <li >
                        <a href="/website/projects/">Open Source Projects</a>
                    </li>
                    
                    <li >
                        <a href="/website/conferences/">KubeCon & QCon</a>
                    </li>
                    
                    <li >
                        <a href="/website/blogs/">Technology Blogs</a>
                    </li>
                    
                    <li >
                        <a href="/website/videos/">Video Resources</a>
                    </li>
                    
                </ul>
            </li>
            

            
            

            
            
                
            
                
            
                
            
                
            

            <li data-check="0"  class="menu-li" >
                <span class='menu-span'>Documentation</span>
                <ul class="dropdown-menu">
                    
                    <li >
                        <a href="/website/docs/">v3.0.0 <img src='/images/header/star.svg' alt='star'></a>
                    </li>
                    
                    <li >
                        <a href="https://v2-1.docs.kubesphere.io/docs">v2.1.x</a>
                    </li>
                    
                    <li >
                        <a href="https://v2-0.docs.kubesphere.io/docs/">v2.0.x</a>
                    </li>
                    
                    <li >
                        <a href="https://v1-0.docs.kubesphere.io/docs/">v1.0.0</a>
                    </li>
                    
                </ul>
            </li>
            

            
            

            
            
                
            
                
            
                
            
                
            
                
            

            <li data-check="0"  class="menu-li" >
                <span class='menu-span'>Community</span>
                <ul class="dropdown-menu">
                    
                    <li >
                        <a href="/website/contribution/">Contribution</a>
                    </li>
                    
                    <li >
                        <a href="/website/case/">Case Studies</a>
                    </li>
                    
                    <li >
                        <a href="/website/partner/">Partner</a>
                    </li>
                    
                    <li >
                        <a href="/website/news/">News</a>
                    </li>
                    
                    <li >
                        <a href="https://github.com/cnimages/kubesphere/blob/master/docs/roadmap.md">RoadMap</a>
                    </li>
                    
                </ul>
            </li>
            

            

        </ul>
        <div class="btn-div">
            <a href="https://demo.kubesphere.io/login" target="_blank" rel="noopener noreferrer">
                <button class="demo-btn">Demo →</button>
            </a>
        </div>
        <div class="link-div">
            <a href="https://join.slack.com/t/kubesphere/shared_invite/enQtNTE3MDIxNzUxNzQ0LTZkNTdkYWNiYTVkMTM5ZThhODY1MjAyZmVlYWEwZmQ3ODQ1NmM1MGVkNWEzZTRhNzk0MzM5MmY4NDc3ZWVhMjE" target="_blank" rel="noopener noreferrer">
                <img src="/images/header/slack-hover.svg" alt="">
            </a>
            <a href="https://twitter.com/KubeSphere" target="_blank" rel="noopener noreferrer">
                <img src="/images/header/twitter-hover.svg" alt="">
            </a>
            <a href="https://github.com/cnimages/kubesphere" target="_blank" rel="noopener noreferrer">
                <img src="/images/header/github-hover.svg" alt="">
            </a>
        </div>
    </div>
</header>
<script>
var bindNavMouseEvent = function(selector) {
    var flag = false
    $(selector).mouseenter(function() {
        if (flag) {
            return false
        }
        flag = true
        $(this).find('.dropdown-menu').fadeIn(200, function() {
            flag = false
        })
    });
    $(selector).mouseleave(function() {
        $(this).find('.dropdown-menu').fadeOut(200)
    });
}

var bindScrollChangeHeader = function() {
    var check = 100
    var header = $('header')
    window.addEventListener('scroll', function() {
        var scrollY = window.scrollY;
        if (scrollY > 100) {
            header.addClass('navigationScroll')
        } else {
            header.removeClass('navigationScroll')
        }
    })
}

var bindClickShowMenu = function() {
    $('.menu-icon').click(function() {
        $('#modal-for-menu').modal()
    })
}

var bindClickModalLi = function() {
    $('.modal .menu-li').click(function() {
        var check = $(this).data('check')
        if (check === 0) {
            $(this).data('check', 1)
            $(this).find('.dropdown-menu').slideDown(200)
        } else {
            $(this).data('check', 0)
            $(this).find('.dropdown-menu').slideUp(200)
        }
        $(this).find('.menu-span').toggleClass('up')
    })
}

var bindClickClose = function() {
    $('#close-join').click(function() {
        $('.navigation .join-div').hide()
        $('.main-section').removeClass('padding')
    })
}

var language = 'en'

bindClickClose()

bindScrollChangeHeader()

bindNavMouseEvent('.header-container .menu-li')
bindNavMouseEvent('.header-container .language-menu')
bindNavMouseEvent('.header-container .btn-li')

bindClickShowMenu()
bindClickModalLi()


</script>
<main class='main-section '>
    <section class='section-1 bg-cover'>
        <div class="common-layout">
            <ol  class="breadcrumbnav">
  

  
  

  
  

  
  

  


<li>
  <a href="/website/docs/">Documentation&nbsp;/&nbsp;</a>
</li>



  


<li>
  <a href="/website/docs/devops-user-guide/">DevOps User Guide&nbsp;/&nbsp;</a>
</li>



  


<li>
  <a href="">Using DevOps&nbsp;/&nbsp;</a>
</li>



  


<li class="active">
  <a href="/website/docs/devops-user-guide/how-to-use/create-a-pipeline-using-jenkinsfile/">Create a Pipeline Using a Jenkinsfile</a>
</li>



</ol>


    
            <div class="title-div">
                
                
                
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                        
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                <h1>DevOps User Guide</h1>
                <div class="menu section-control">
                    <div></div>
                    <div></div>
                    <div></div>
                </div>
            </div>
    
            <div class="search-div">
                <div class="search-input-div">
  <input id="search" type="text" placeholder="Search Documentation">
  <svg width="1em" height="1em" viewBox="0 0 18 18">
    <g fill="none" fill-rule="evenodd">
      <path d="M12.606 11.192l5.24 5.24-1.415 1.414-5.239-5.24a7.041 7.041 0 0 0 1.414-1.414z" fill="#324558"></path>
      <path d="M7 14A7 7 0 1 1 7 0a7 7 0 0 1 0 14zm0-2A5 5 0 1 0 7 2a5 5 0 0 0 0 10z" fill="#B6C2CD"></path>
    </g>
  </svg>
</div>
<script>
docsearch({
  apiKey: '221332a85783d16a5b930969fe4a934a',
  indexName: 'kubesphere',
  inputSelector: '#search',
  algoliaOptions: {
      facetFilters: [`lang:${language}`],
      hitsPerPage: 10,
  },
  transformData: function(hits) {
    hits.forEach(hit => {
      if (typeof window !== undefined) {
        var host = window.location.host
        if (host == 'kubesphere.com.cn') {
          if (language == 'en') {
            host = host + '/en'
            hit.url = hit.url.replace('kubesphere.io', host)
          } else if (language == 'zh') {
            hit.url = hit.url.replace('kubesphere.io/zh', host)
          }
        } else {
          hit.url = hit.url.replace('kubesphere.io', host)
        }
      }
    })
    return hits
  },
  debug: false,
})
</script>
            </div>
        </div>
    </section>
    
    <section class="section-menu">
    
        <div class="common-layout">
            
<ul class="common-flex-layout">
    
    <li>
        <h2>
            <span><img src="/images/docs/docs.svg" alt="Release Notes"></span>
            <a href="/website/docs/release/">Release Notes</a>
        </h2>
        
        
        <ul>

            
                
                <li>
                    
                    <a href="/website/docs/release/release-v300/" title="Release Notes - 3.0.0">Release Notes - 3.0.0</a>
                    
                </li>
                
                <li>
                    
                    <a href="/website/docs/release/release-v211/" title="Release Notes - 2.1.1">Release Notes - 2.1.1</a>
                    
                </li>
                
                <li>
                    
                    <a href="/website/docs/release/release-v210/" title="Release Notes - 2.1.0">Release Notes - 2.1.0</a>
                    
                </li>
                
                <li>
                    
                    <a href="/website/docs/release/release-v202/" title="Release Notes - 2.0.2">Release Notes - 2.0.2</a>
                    
                </li>
                
                <li>
                    
                    <a href="/website/docs/release/release-v201/" title="Release Notes - 2.0.1">Release Notes - 2.0.1</a>
                    
                </li>
                
                <li>
                    
                    <a href="/website/docs/release/release-v200/" title="Release Notes - 2.0.0">Release Notes - 2.0.0</a>
                    
                </li>
                
            
        </ul>
    </li>
    
    <li>
        <h2>
            <span><img src="/images/docs/docs.svg" alt="Introduction"></span>
            <a href="/website/docs/introduction/">Introduction</a>
        </h2>
        
        
        <ul>

            
                
                <li>
                    
                    <a href="/website/docs/introduction/what-is-kubesphere/" title="What is KubeSphere">What is KubeSphere</a>
                    
                </li>
                
                <li>
                    
                    <a href="/website/docs/introduction/features/" title="Features">Features</a>
                    
                </li>
                
                <li>
                    
                    <a href="/website/docs/introduction/architecture/" title="Architecture">Architecture</a>
                    
                </li>
                
                <li>
                    
                    <a href="/website/docs/introduction/advantages/" title="Advantages">Advantages</a>
                    
                </li>
                
                <li>
                    
                    <a href="/website/docs/introduction/scenarios/" title="Use Cases">Use Cases</a>
                    
                </li>
                
                <li>
                    
                    <a href="/website/docs/introduction/glossary/" title="Glossary">Glossary</a>
                    
                </li>
                
            
        </ul>
    </li>
    
    <li>
        <h2>
            <span><img src="/images/docs/docs.svg" alt="Quickstarts"></span>
            <a href="/website/docs/quick-start/">Quickstarts</a>
        </h2>
        
        
        <ul>

            
                
                <li>
                    
                    <a href="/website/docs/quick-start/all-in-one-on-linux/" title="All-in-one Installation on Linux">All-in-one Installation on Linux</a>
                    
                </li>
                
                <li>
                    
                    <a href="/website/docs/quick-start/minimal-kubesphere-on-k8s/" title="Minimal KubeSphere on Kubernetes">Minimal KubeSphere on Kubernetes</a>
                    
                </li>
                
                <li>
                    
                    <a href="/website/docs/quick-start/create-workspace-and-project/" title="Create Workspace, Project, Account and Role">Create Workspace, Project, Account and Role</a>
                    
                </li>
                
                <li>
                    
                    <a href="/website/docs/quick-start/deploy-bookinfo-to-k8s/" title="Deploy Bookinfo and Manage Traffic">Deploy Bookinfo and Manage Traffic</a>
                    
                </li>
                
                <li>
                    
                    <a href="/website/docs/quick-start/wordpress-deployment/" title="Compose and Deploy WordPress">Compose and Deploy WordPress</a>
                    
                </li>
                
                <li>
                    
                    <a href="/website/docs/quick-start/enable-pluggable-components/" title="Enable Pluggable Components">Enable Pluggable Components</a>
                    
                </li>
                
            
        </ul>
    </li>
    
    <li>
        <h2>
            <span><img src="/images/docs/docs.svg" alt="Installing on Linux"></span>
            <a href="/website/docs/installing-on-linux/">Installing on Linux</a>
        </h2>
        
        
        <ul>

            
                
                <li>
                    
                    




    
        <a href="/website/docs/installing-on-linux/introduction/intro/">Introduction</a>
    


                    
                </li>
                
                <li>
                    
                    




    
        <a href="/website/docs/installing-on-linux/on-premises/install-kubesphere-on-vmware-vsphere/">Installing in On-premises Environments</a>
    


                    
                </li>
                
                <li>
                    
                    




    
        <a href="/website/docs/installing-on-linux/public-cloud/install-ks-on-azure-vms/">Installing on Public Cloud</a>
    


                    
                </li>
                
                <li>
                    
                    




    
        <a href="/website/docs/installing-on-linux/cluster-operation/add-new-nodes/">Add/Delete Nodes</a>
    


                    
                </li>
                
                <li>
                    
                    




    
        <a href="/website/docs/installing-on-linux/uninstalling/uninstalling-kubesphere-and-kubernetes/">Uninstalling</a>
    


                    
                </li>
                
                <li>
                    
                    




    
        <a href="/website/docs/installing-on-linux/faq/configure-booster/">FAQ</a>
    


                    
                </li>
                
            
        </ul>
    </li>
    
    <li>
        <h2>
            <span><img src="/images/docs/docs.svg" alt="Installing on Kubernetes"></span>
            <a href="/website/docs/installing-on-kubernetes/">Installing on Kubernetes</a>
        </h2>
        
        
        <ul>

            
                
                <li>
                    
                    




    
        <a href="/website/docs/installing-on-kubernetes/introduction/overview/">Introduction</a>
    


                    
                </li>
                
                <li>
                    
                    




    
        <a href="/website/docs/installing-on-kubernetes/hosted-kubernetes/install-kubesphere-on-aks/">Installing on Hosted Kubernetes</a>
    


                    
                </li>
                
                <li>
                    
                    




    
        <a href="/website/docs/installing-on-kubernetes/on-prem-kubernetes/install-ks-on-linux-airgapped/">Installing on On-premises Kubernetes</a>
    


                    
                </li>
                
                <li>
                    
                    




    
        <a href="/website/docs/installing-on-kubernetes/uninstalling/uninstalling-kubesphere-from-k8s/">Uninstalling</a>
    


                    
                </li>
                
                <li>
                    
                    




    
        <a href="/website/docs/installing-on-kubernetes/faq/faq1/">FAQ</a>
    


                    
                </li>
                
            
        </ul>
    </li>
    
    <li>
        <h2>
            <span><img src="/images/docs/docs.svg" alt="Multi-cluster Management"></span>
            <a href="/website/docs/multicluster-management/">Multi-cluster Management</a>
        </h2>
        
        
        <ul>

            
                
                <li>
                    
                    




    
        <a href="/website/docs/multicluster-management/introduction/overview/">Introduction</a>
    


                    
                </li>
                
                <li>
                    
                    




    
        <a href="/website/docs/multicluster-management/enable-multicluster/direct-connection/">Enable Multi-cluster in KubeSphere</a>
    


                    
                </li>
                
                <li>
                    
                    




    
        <a href="/website/docs/multicluster-management/import-cloud-hosted-k8s/import-aliyun-ack/">Import Cloud-hosted Kubernetes Cluster</a>
    


                    
                </li>
                
                <li>
                    
                    




    
        <a href="/website/docs/multicluster-management/import-on-prem-k8s/import-kubeadm-k8s/">Import On-prem Kubernetes Cluster</a>
    


                    
                </li>
                
                <li>
                    
                    




    
        <a href="/website/docs/multicluster-management/remove-cluster/kubefed-in-kubesphere/">Remove Cluster</a>
    


                    
                </li>
                
            
        </ul>
    </li>
    
    <li>
        <h2>
            <span><img src="/images/docs/docs.svg" alt="Enable Pluggable Components"></span>
            <a href="/website/docs/pluggable-components/">Enable Pluggable Components</a>
        </h2>
        
        
        <ul>

            
                
                <li>
                    
                    <a href="/website/docs/pluggable-components/overview/" title="Overview">Overview</a>
                    
                </li>
                
                <li>
                    
                    <a href="/website/docs/pluggable-components/app-store/" title="KubeSphere App Store">KubeSphere App Store</a>
                    
                </li>
                
                <li>
                    
                    <a href="/website/docs/pluggable-components/devops/" title="KubeSphere DevOps System">KubeSphere DevOps System</a>
                    
                </li>
                
                <li>
                    
                    <a href="/website/docs/pluggable-components/auditing-logs/" title="KubeSphere Auditing Logs">KubeSphere Auditing Logs</a>
                    
                </li>
                
                <li>
                    
                    <a href="/website/docs/pluggable-components/events/" title="KubeSphere Events">KubeSphere Events</a>
                    
                </li>
                
                <li><a href="/website/docs/pluggable-components/">Learn More...</a></li>
            
        </ul>
    </li>
    
    <li>
        <h2>
            <span><img src="/images/docs/docs.svg" alt="Upgrade"></span>
            <a href="/website/docs/upgrade/">Upgrade</a>
        </h2>
        
        
        <ul>

            
                
                <li>
                    
                    <a href="/website/docs/upgrade/upgrade-overview/" title="Overview">Overview</a>
                    
                </li>
                
                <li>
                    
                    <a href="/website/docs/upgrade/upgrade-with-kubekey/" title="Upgrade with KubeKey">Upgrade with KubeKey</a>
                    
                </li>
                
                <li>
                    
                    <a href="/website/docs/upgrade/upgrade-with-ks-installer/" title="Upgrade with ks-installer">Upgrade with ks-installer</a>
                    
                </li>
                
                <li>
                    
                    <a href="/website/docs/upgrade/what-changed/" title="Changes after Upgrade">Changes after Upgrade</a>
                    
                </li>
                
                <li>
                    
                    <a href="/website/docs/upgrade/upgrade-faq/" title="FAQ">FAQ</a>
                    
                </li>
                
            
        </ul>
    </li>
    
    <li>
        <h2>
            <span><img src="/images/docs/docs.svg" alt="Cluster Administration"></span>
            <a href="/website/docs/cluster-administration/">Cluster Administration</a>
        </h2>
        
        
        <ul>

            
                
                <li>
                    
                    <a href="/website/docs/cluster-administration/persistent-volume-and-storage-class/" title="Persistent Volume and Storage Class">Persistent Volume and Storage Class</a>
                    
                </li>
                
                <li>
                    
                    <a href="/website/docs/cluster-administration/nodes/" title="Node Management">Node Management</a>
                    
                </li>
                
                <li>
                    
                    <a href="/website/docs/cluster-administration/cluster-status-monitoring/" title="Cluster Status Monitoring">Cluster Status Monitoring</a>
                    
                </li>
                
                <li>
                    
                    <a href="/website/docs/cluster-administration/application-resources-monitoring/" title="Application Resources Monitoring">Application Resources Monitoring</a>
                    
                </li>
                
                <li>
                    
                    




    
        <a href="/website/docs/cluster-administration/cluster-wide-alerting-and-notification/alertmanager/">Cluster-wide Alerting and Notification</a>
    


                    
                </li>
                
                <li><a href="/website/docs/cluster-administration/">Learn More...</a></li>
            
        </ul>
    </li>
    
    <li>
        <h2>
            <span><img src="/images/docs/docs.svg" alt="Workspace Administration and User Guide"></span>
            <a href="/website/docs/workspace-administration/">Workspace Administration and User Guide</a>
        </h2>
        
        
        <ul>

            
                
                <li>
                    
                    <a href="/website/docs/workspace-administration/workspace-overview/" title="Workspace Overview">Workspace Overview</a>
                    
                </li>
                
                <li>
                    
                    <a href="/website/docs/workspace-administration/upload-helm-based-application/" title="Upload Helm-based Applications">Upload Helm-based Applications</a>
                    
                </li>
                
                <li>
                    
                    <a href="/website/docs/workspace-administration/role-and-member-management/" title="Role and Member Management">Role and Member Management</a>
                    
                </li>
                
                <li>
                    
                    <a href="/website/docs/workspace-administration/workspace-network-isolation/" title="Workspace Network Isolation">Workspace Network Isolation</a>
                    
                </li>
                
                <li>
                    
                    




    
        <a href="/website/docs/workspace-administration/app-repository/import-helm-repository/">App Repository</a>
    


                    
                </li>
                
            
        </ul>
    </li>
    
    <li>
        <h2>
            <span><img src="/images/docs/docs.svg" alt="Project User Guide"></span>
            <a href="/website/docs/project-user-guide/">Project User Guide</a>
        </h2>
        
        
        <ul>

            
                
                <li>
                    
                    




    
        <a href="/website/docs/project-user-guide/application/app-template/">Applications</a>
    


                    
                </li>
                
                <li>
                    
                    




    
        <a href="/website/docs/project-user-guide/application-workloads/deployments/">Application Workloads</a>
    


                    
                </li>
                
                <li>
                    
                    




    
        <a href="/website/docs/project-user-guide/configuration/configmaps/">Configurations</a>
    


                    
                </li>
                
                <li>
                    
                    




    
        <a href="/website/docs/project-user-guide/custom-application-monitoring/introduction/">Custom Application Monitoring</a>
    


                    
                </li>
                
                <li>
                    
                    




    
        <a href="/website/docs/project-user-guide/grayscale-release/overview/">Grayscale Release</a>
    


                    
                </li>
                
                <li><a href="/website/docs/project-user-guide/">Learn More...</a></li>
            
        </ul>
    </li>
    
    <li>
        <h2>
            <span><img src="/images/docs/docs.svg" alt="DevOps User Guide"></span>
            <a href="/website/docs/devops-user-guide/">DevOps User Guide</a>
        </h2>
        
        
        <ul>

            
                
                <li>
                    
                    




    
        <a href="/website/docs/devops-user-guide/how-to-use/devops-project-management/">Using DevOps</a>
    


                    
                </li>
                
                <li>
                    
                    




    
        <a href="/website/docs/devops-user-guide/how-to-integrate/sonarqube/">Tool Integration</a>
    


                    
                </li>
                
                <li>
                    
                    




    
        <a href="/website/docs/devops-user-guide/examples/go-project-pipeline/">Examples</a>
    


                    
                </li>
                
            
        </ul>
    </li>
    
    <li>
        <h2>
            <span><img src="/images/docs/docs.svg" alt="Access Control and Account Management"></span>
            <a href="/website/docs/access-control-and-account-management/">Access Control and Account Management</a>
        </h2>
        
        
        <ul>

            
                
                <li>
                    
                    <a href="/website/docs/access-control-and-account-management/configuring-authentication/" title="Configure Authentication">Configure Authentication</a>
                    
                </li>
                
            
        </ul>
    </li>
    
    <li>
        <h2>
            <span><img src="/images/docs/docs.svg" alt="Project Administration Guide"></span>
            <a href="/website/docs/project-administration/">Project Administration Guide</a>
        </h2>
        
        
        <ul>

            
                
                <li>
                    
                    <a href="/website/docs/project-administration/project-quota/" title="Project Quotas">Project Quotas</a>
                    
                </li>
                
                <li>
                    
                    <a href="/website/docs/project-administration/project-gateway/" title="Project Gateway">Project Gateway</a>
                    
                </li>
                
                <li>
                    
                    <a href="/website/docs/project-administration/project-network-isolation/" title="Project Network Isolation">Project Network Isolation</a>
                    
                </li>
                
                <li>
                    
                    <a href="/website/docs/project-administration/project-and-multicluster-project/" title="Projects and Multi-cluster Projects">Projects and Multi-cluster Projects</a>
                    
                </li>
                
                <li>
                    
                    <a href="/website/docs/project-administration/role-and-member-management/" title="Role and Member Management">Role and Member Management</a>
                    
                </li>
                
            
        </ul>
    </li>
    
    <li>
        <h2>
            <span><img src="/images/docs/docs.svg" alt="App Store"></span>
            <a href="/website/docs/application-store/">App Store</a>
        </h2>
        
        
        <ul>

            
                
                <li>
                    
                    




    
        <a href="/website/docs/application-store/app-developer-guide/helm-developer-guide/">Application Developer Guide</a>
    


                    
                </li>
                
                <li>
                    
                    




    
        <a href="/website/docs/application-store/built-in-apps/rabbitmq-app/">Built-in Applications</a>
    


                    
                </li>
                
                <li>
                    
                    




    
        <a href="/website/docs/application-store/external-apps/gitlab-app/">External Applications</a>
    


                    
                </li>
                
                <li>
                    
                    <a href="/website/docs/application-store/app-lifecycle-management/" title="Application Lifecycle Management">Application Lifecycle Management</a>
                    
                </li>
                
            
        </ul>
    </li>
    
    <li>
        <h2>
            <span><img src="/images/docs/docs.svg" alt="Toolbox"></span>
            <a href="/website/docs/toolbox/">Toolbox</a>
        </h2>
        
        
        <ul>

            
                
                <li>
                    
                    <a href="/website/docs/toolbox/log-query/" title="Log Query">Log Query</a>
                    
                </li>
                
                <li>
                    
                    <a href="/website/docs/toolbox/events-query/" title="Event Query">Event Query</a>
                    
                </li>
                
                <li>
                    
                    




    
        <a href="/website/docs/toolbox/auditing/auditing-receive-customize/">Auditing</a>
    


                    
                </li>
                
                <li>
                    
                    <a href="/website/docs/toolbox/web-kubectl/" title="Web Kubectl">Web Kubectl</a>
                    
                </li>
                
                <li>
                    
                    <a href="/website/docs/toolbox/history/" title="History">History</a>
                    
                </li>
                
            
        </ul>
    </li>
    
    <li>
        <h2>
            <span><img src="/images/docs/docs.svg" alt="FAQ"></span>
            <a href="/website/docs/faq/">FAQ</a>
        </h2>
        
        
        <ul>

            
                
                <li>
                    
                    <a href="/website/docs/faq/console-faq/" title="Questions about KubeSphere Console">Questions about KubeSphere Console</a>
                    
                </li>
                
                <li>
                    
                    <a href="/website/docs/faq/telemetry/" title="Telemetry in KubeSphere">Telemetry in KubeSphere</a>
                    
                </li>
                
            
        </ul>
    </li>
    
    <li>
        <h2>
            <span><img src="/images/docs/docs.svg" alt="Reference"></span>
            <a href="/website/docs/reference/">Reference</a>
        </h2>
        
        
        <ul>

            
                
                <li>
                    
                    <a href="/website/docs/reference/glossary/" title="Glossary">Glossary</a>
                    
                </li>
                
                <li>
                    
                    <a href="/website/docs/reference/api-docs/" title="KubeSphere API">KubeSphere API</a>
                    
                </li>
                
                <li>
                    
                    




    
        <a href="/website/docs/reference/api-changes/logging/">API Changes</a>
    


                    
                </li>
                
            
        </ul>
    </li>
    
    
    <li style="height: 0; margin: 0; padding: 0;"></li>
    
    <li style="height: 0; margin: 0; padding: 0;"></li>
    
    <li style="height: 0; margin: 0; padding: 0;"></li>
    
    <li style="height: 0; margin: 0; padding: 0;"></li>
    
    <li style="height: 0; margin: 0; padding: 0;"></li>
    
    <li style="height: 0; margin: 0; padding: 0;"></li>
    
    <li style="height: 0; margin: 0; padding: 0;"></li>
    
    <li style="height: 0; margin: 0; padding: 0;"></li>
    
    <li style="height: 0; margin: 0; padding: 0;"></li>
    
    <li style="height: 0; margin: 0; padding: 0;"></li>
    
    <li style="height: 0; margin: 0; padding: 0;"></li>
    
    <li style="height: 0; margin: 0; padding: 0;"></li>
    
    <li style="height: 0; margin: 0; padding: 0;"></li>
    
    <li style="height: 0; margin: 0; padding: 0;"></li>
    
    <li style="height: 0; margin: 0; padding: 0;"></li>
    
    <li style="height: 0; margin: 0; padding: 0;"></li>
    
    <li style="height: 0; margin: 0; padding: 0;"></li>
    
    <li style="height: 0; margin: 0; padding: 0;"></li>
    
</ul>
        </div>
    
    </section>
    
    <section class="section-2">
        <div class="common-layout">
            <div class="left-div left-tree">
                <div class="inner-tree">
                    <div>
  <nav class='nav-menu'>
		
		
		
		
			
		
			
		
			
		
			
		
			
		
			
		
			
		
			
		
			
		
			
		
			
		
			
				
			
		
			
		
			
		
			
		
			
		
			
		
			
		
    






<ul class="ul-active">
	
	
	
	<li class="list">
		
		




<p class="list-title">
	<span class="arrow arrow-open"></span>
	<span>Using DevOps</span>
</p>


<ul class="ul-active">
	
	
	
	<li class="list">
		
		<a href="/website/docs/devops-user-guide/how-to-use/devops-project-management/">DevOps Project Management</a>
		
	</li>
	
	
	<li class="list active">
		
		<a href="/website/docs/devops-user-guide/how-to-use/create-a-pipeline-using-jenkinsfile/">Create a Pipeline Using a Jenkinsfile</a>
		
	</li>
	
	
	<li class="list">
		
		<a href="/website/docs/devops-user-guide/how-to-use/create-a-pipeline-using-graphical-editing-panel/">Create a Pipeline - using Graphical Editing Panel</a>
		
	</li>
	
	
	<li class="list">
		
		<a href="/website/docs/devops-user-guide/how-to-use/choose-jenkins-agent/">Choose Jenkins Agent</a>
		
	</li>
	
	
	<li class="list">
		
		<a href="/website/docs/devops-user-guide/how-to-use/credential-management/">Credential Management</a>
		
	</li>
	
	
	<li class="list">
		
		<a href="/website/docs/devops-user-guide/how-to-use/set-ci-node/">Set CI Node for Dependency Cache</a>
		
	</li>
	
	
	<li class="list">
		
		<a href="/website/docs/devops-user-guide/how-to-use/jenkins-email/">Set Email Server for KubeSphere Pipelines</a>
		
	</li>
	
	
	<li class="list">
		
		<a href="/website/docs/devops-user-guide/how-to-use/role-and-member-management/">Role and Member Management</a>
		
	</li>
	
	
	<li class="list">
		
		<a href="/website/docs/devops-user-guide/how-to-use/jenkins-setting/">Jenkins System Settings</a>
		
	</li>
	
</ul>

		
	</li>
	
	
	<li class="list">
		
		




<p class="list-title">
	<span class="arrow "></span>
	<span>Tool Integration</span>
</p>


<ul class="">
	
	
	
	<li class="list">
		
		<a href="/website/docs/devops-user-guide/how-to-integrate/sonarqube/">Integrate SonarQube into Pipeline</a>
		
	</li>
	
	
	<li class="list">
		
		<a href="/website/docs/devops-user-guide/how-to-integrate/harbor/">Integrate Harbor in Pipeline</a>
		
	</li>
	
</ul>

		
	</li>
	
	
	<li class="list">
		
		




<p class="list-title">
	<span class="arrow "></span>
	<span>Examples</span>
</p>


<ul class="">
	
	
	
	<li class="list">
		
		<a href="/website/docs/devops-user-guide/examples/go-project-pipeline/">Build and Deploy a Go Project</a>
		
	</li>
	
	
	<li class="list">
		
		<a href="/website/docs/devops-user-guide/examples/a-maven-project/">Build And Deploy A Maven Project</a>
		
	</li>
	
	
	<li class="list">
		
		<a href="/website/docs/devops-user-guide/examples/multi-cluster-project-example/">Deploy Apps in a Multi-cluster Project Using Jenkinsfile</a>
		
	</li>
	
</ul>

		
	</li>
	
</ul>

  </nav>
</div>


<script>
	$('.nav-menu .list-title').click(function() {
		$(this).find('.arrow').toggleClass('arrow-open')
		$(this).next().toggleClass('ul-active')
	})
</script>

                    
                </div>
            </div>
            <div class="second-section-menu">
                <div></div>
                <div></div>
                <div></div>
            </div>
            <div class="middle-div">
                <div class="top-div common-flex-layout">
                    <div class="contributor-div">
                        <span>Last updated:</span>
                        <span class="update-time"></span>
                        <a href="https://github.com/cnimages/website/blob/master/content/en/docs%5cdevops-user-guide%5chow-to-use%5ccreate-a-pipeline-using-jenkinsfile.md" target="_blank" rel="noopener noreferrer">
                            <ul class="contributor-avatar"></ul>
                        </a>
                        <span class="more-contributor"></span>
                    </div>
                    <div class="mutual-div common-flex-layout">
                        <div class="edit-div">
                            <a href="https://github.com/cnimages/website/edit/master/content/en/docs%5cdevops-user-guide%5chow-to-use%5ccreate-a-pipeline-using-jenkinsfile.md" target="_blank" rel="noopener noreferrer">
                                <span class="icon-span"></span>
                                <span>Edit</span>
                            </a>
                        </div>
                        <div class="feedback-div">
                            <a href="https://github.com/cnimages/website/issues/new" target="_blank" rel="noopener noreferrer">
                            <span class="icon-span"></span>
                            <span>Feedback</span>
                            </a>
                        </div>
                        <div class="share-div">
                            <div>
                                <span class="icon-span"></span>
                                <span>Share</span>
                            </div>
                            <ul>
                                <li>
                                    <img src="/images/docs/twitter.svg" alt="twitter">
                                    <a href="http://twitter.com/share?url=https%3a%2f%2fcnimages.github.io%2fwebsite%2fdocs%2fdevops-user-guide%2fhow-to-use%2fcreate-a-pipeline-using-jenkinsfile%2f&text=Create%20a%20Pipeline%20Using%20a%20Jenkinsfile" target="_blank" rel="noopener noreferrer">twitter</a>
                                </li>
                                <li>
                                    <img src="/images/docs/linkedIn.svg" alt="linkedIn">
                                    <a href="http://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2fcnimages.github.io%2fwebsite%2fdocs%2fdevops-user-guide%2fhow-to-use%2fcreate-a-pipeline-using-jenkinsfile%2f" target="_blank" rel="noopener noreferrer">linkedIn</a>
                                </li>
                                <li>
                                    <img src="/images/docs/facebook.svg" alt="facebook">
                                    <a href="http://www.facebook.com/sharer.php?u=https%3a%2f%2fcnimages.github.io%2fwebsite%2fdocs%2fdevops-user-guide%2fhow-to-use%2fcreate-a-pipeline-using-jenkinsfile%2f" target="_blank" rel="noopener noreferrer">facebook</a>
                                </li>
                                <li>
                                    <img src="/images/docs/reddit.svg" alt="reddit">
                                    <a href="http://reddit.com/submit?url=https%3a%2f%2fcnimages.github.io%2fwebsite%2fdocs%2fdevops-user-guide%2fhow-to-use%2fcreate-a-pipeline-using-jenkinsfile%2f&title=Create%20a%20Pipeline%20Using%20a%20Jenkinsfile" target="_blank" rel="noopener noreferrer">reddit</a>
                                </li>
                                <li>
                                    <img src="/images/docs/email.svg" alt="email" >
                                    <a href="mailto:kubesphere@gmail.com" target="_blank" rel="noopener noreferrer">email</a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
    
                <div class="content-div main-div">
                    <div class="md-body">
                        <h1>Create a Pipeline Using a Jenkinsfile</h1>
                        <p>A Jenkinsfile is a text file that contains the definition of a Jenkins pipeline and is checked into source control.  As it stores the entire workflow as code, it underpins the code review and iteration process of a pipeline. For more information, see <a href="https://www.jenkins.io/doc/book/pipeline/jenkinsfile/" target="_blank" rel="noopener noreferrer">the official documentation of Jenkins</a>.</p>
<p>This tutorial demonstrates how to create a pipeline based on a Jenkinsfile from a GitHub repository. Using the pipeline, you deploy an example application to a development environment and a production environment respectively, which is accessible externally.</p>
<div class="notices note">
  
  <p>Note</p>
  <div>Two types of pipelines can be created in KubeSphere: Pipelines created based on a Jenkinsfile in SCM, which is introduced in this tutorial, and <a href="../create-a-pipeline-using-graphical-editing-panel">pipelines created through the graphical editing panel</a>. The Jenkinsfile in SCM requires an internal Jenkinsfile in Source Control Management (SCM). In other words, the Jenkfinsfile serves as part of SCM. The KubeSphere DevOps system automatically builds a CI/CD pipeline based on the existing Jenkinsfile of the code repository. You can define workflows such as <code>stage</code> and <code>step</code>.</div>
</div>
<h2 id="prerequisites">Prerequisites</h2>
<ul>
<li>You need to have a <a href="https://hub.docker.com/" target="_blank" rel="noopener noreferrer">Docker Hub</a> account and a <a href="https://github.com/" target="_blank" rel="noopener noreferrer">GitHub</a> account.</li>
<li>You need to <a href="../../../pluggable-components/devops/">enable KubeSphere DevOps system</a>.</li>
<li>You need to create a workspace, a DevOps project, and an account (<code>project-regular</code>). This account needs to be invited to the DevOps project with the <code>operator</code> role. See <a href="../../../quick-start/create-workspace-and-project/">Create Workspace, Project, Account and Role</a> if they are not ready.</li>
<li>You need to set a CI dedicated node for running pipelines. Refer to <a href="../../how-to-use/set-ci-node/">Set CI Node for Dependency Cache</a>.</li>
<li>You need to install and configure SonarQube. Refer to <a href="../../../devops-user-guide/how-to-integrate/sonarqube/">Integrate SonarQube into Pipeline</a>. If you skip this part, there is no <strong>SonarQube Analysis</strong> below.</li>
</ul>
<h2 id="pipeline-overview">Pipeline Overview</h2>
<p>There are eight stages as shown below in this example pipeline.</p>
<p><img src="https://pek3b.qingstor.com/kubesphere-docs/png/20190512155453.png#align=left&amp;display=inline&amp;height=1302&amp;originHeight=1302&amp;originWidth=2180&amp;search=&amp;status=done&amp;width=2180" alt="Pipeline Overview"></p>
<div class="notices note">
  
  <p>Note</p>
  <div><ul>
<li><strong>Stage 1. Checkout SCM</strong>: Check out source code from the GitHub repository.</li>
<li><strong>Stage 2. Unit test</strong>: It will not proceed with the next stage unit the test is passed.</li>
<li><strong>Stage 3. SonarQube analysis</strong>: The SonarQube code quality analysis.</li>
<li><strong>Stage 4.</strong> <strong>Build &amp; push snapshot image</strong>: Build the image based on selected branches in <strong>Behavioral strategy</strong>. Push the tag of <code>SNAPSHOT-$BRANCH_NAME-$BUILD_NUMBER</code> to Docker Hub, the <code>$BUILD_NUMBER</code> of which is the operation serial number in the pipeline&rsquo;s activity list.</li>
<li><strong>Stage 5. Push the latest image</strong>: Tag the sonarqube branch as <code>latest</code> and push it to Docker Hub.</li>
<li><strong>Stage 6. Deploy to dev</strong>: Deploy the sonarqube branch to the development environment. Review is required for this stage.</li>
<li><strong>Stage 7. Push with tag</strong>: Generate the tag and release it to GitHub. The tag is pushed to Docker Hub.</li>
<li><strong>Stage 8. Deploy to production</strong>: Deploy the released tag to the production environment.</li>
</ul>
</div>
</div>
<h2 id="hands-on-lab">Hands-on Lab</h2>
<h3 id="step-1-create-credentials">Step 1: Create Credentials</h3>
<ol>
<li>Log in the KubeSphere console as <code>project-regular</code>. Go to your DevOps project and create the following credentials in <strong>Credentials</strong> under <strong>Project Management</strong>. For more information about how to create credentials, see <a href="../../../devops-user-guide/how-to-use/credential-management/">Credential Management</a>.</li>
</ol>
<div class="notices note">
  
  <p>Note</p>
  <div>If there are any special characters such as <code>@</code> and <code>$</code> in your account or password, they can cause errors as a pipeline runs because they may not be recognized. In this case, you need to encode your account or password on some third-party websites first, such as <a href="https://www.urlencoder.org/">urlencoder</a>. After that, copy and paste the output for your credential information.</div>
</div>
<table>
<thead>
<tr>
<th>Credential ID</th>
<th>Type</th>
<th>Where to use</th>
</tr>
</thead>
<tbody>
<tr>
<td>dockerhub-id</td>
<td>Account Credentials</td>
<td>Docker Hub</td>
</tr>
<tr>
<td>github-id</td>
<td>Account Credentials</td>
<td>GitHub</td>
</tr>
<tr>
<td>demo-kubeconfig</td>
<td>kubeconfig</td>
<td>Kubernetes</td>
</tr>
</tbody>
</table>
<ol start="2">
<li>You need to create an additional credential ID (<code>sonar-token</code>) for SonarQube, which is used in stage 3 (SonarQube analysis) mentioned above. Refer to <a href="../../../devops-user-guide/how-to-integrate/sonarqube/#create-sonarqube-token-for-new-project">Create SonarQube Token for New Project</a> to use the token for the <strong>secret</strong> field below. Click <strong>OK</strong> to finish.</li>
</ol>
<p><img src="/images/docs/devops-user-guide/create-a-pipeline-using-a-jenkinsfile/sonar-token.jpg" alt="sonar-token"></p>
<ol start="3">
<li>In total, you have four credentials in the list.</li>
</ol>
<p><img src="/images/docs/devops-user-guide/create-a-pipeline-using-a-jenkinsfile/credential-list.jpg" alt="credential-list"></p>
<h3 id="step-2-modify-jenkinsfile-in-github-repository">Step 2: Modify Jenkinsfile in GitHub Repository</h3>
<ol>
<li>Log in GitHub. Fork <a href="https://github.com/kubesphere/devops-java-sample" target="_blank" rel="noopener noreferrer">devops-java-sample</a> from the GitHub repository to your own GitHub account.</li>
</ol>
<p><img src="/images/docs/devops-user-guide/create-a-pipeline-using-a-jenkinsfile/fork-github-repo.jpg" alt="fork-github-repo"></p>
<ol start="2">
<li>In your own GitHub repository of <strong>devops-java-sample</strong>, click the file <code>Jenkinsfile-online</code> in the root directory.</li>
</ol>
<p><img src="/images/docs/devops-user-guide/create-a-pipeline-using-a-jenkinsfile/jenkins-edit-1.jpg" alt="jenkins-edit-1"></p>
<ol start="3">
<li>Click the edit icon on the right to edit environment variables.</li>
</ol>
<p><img src="/images/docs/devops-user-guide/create-a-pipeline-using-a-jenkinsfile/jenkins-edit-2.jpg" alt="jenkins-edit-2"></p>
<table>
<thead>
<tr>
<th align="left">Items</th>
<th align="left">Value</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">DOCKER_CREDENTIAL_ID</td>
<td align="left">dockerhub-id</td>
<td align="left">The <strong>Credential ID</strong> you set in KubeSphere for your Docker Hub account.</td>
</tr>
<tr>
<td align="left">GITHUB_CREDENTIAL_ID</td>
<td align="left">github-id</td>
<td align="left">The <strong>Credential ID</strong> you set in KubeSphere for your GitHub account. It is used to push tags to your GitHub repository.</td>
</tr>
<tr>
<td align="left">KUBECONFIG_CREDENTIAL_ID</td>
<td align="left">demo-kubeconfig</td>
<td align="left">The <strong>Credential ID</strong> you set in KubeSphere for your kubeconfig. It is used to access a running Kubernetes cluster.</td>
</tr>
<tr>
<td align="left">REGISTRY</td>
<td align="left">docker.io</td>
<td align="left">It defaults to <code>docker.io</code>, serving as the address of pushing images.</td>
</tr>
<tr>
<td align="left">DOCKERHUB_NAMESPACE</td>
<td align="left">your-dockerhub-account</td>
<td align="left">Replace it with your Docker Hub&rsquo;s account name. It can be the Organization name under the account.</td>
</tr>
<tr>
<td align="left">GITHUB_ACCOUNT</td>
<td align="left">your-github-account</td>
<td align="left">Replace it with your GitHub account name. For example, your GitHub account name is <code>kubesphere</code> if your GitHub address is  <code>https://github.com/kubesphere/</code>. It can also be the account&rsquo;s Organization name.</td>
</tr>
<tr>
<td align="left">APP_NAME</td>
<td align="left">devops-java-sample</td>
<td align="left">The application name.</td>
</tr>
<tr>
<td align="left">SONAR_CREDENTIAL_ID</td>
<td align="left">sonar-token</td>
<td align="left">The <strong>Credential ID</strong> you set in KubeSphere for the SonarQube token. It is used for code quality test.</td>
</tr>
</tbody>
</table>
<div class="notices note">
  
  <p>Note</p>
  <div>The command parameter <code>-o</code> of Jenkinsfile&rsquo;s <code>mvn</code> indicates that the offline mode is enabled. Relevant dependencies have already been downloaded in this tutorial to save time and to adapt to network interference in certain environments. The offline mode is on by default.</div>
</div>
<ol start="4">
<li>After you edit the environmental variables, click <strong>Commit changes</strong> at the bottom of the page, which updates the file in the SonarQube branch.</li>
</ol>
<p><img src="/images/docs/devops-user-guide/create-a-pipeline-using-a-jenkinsfile/commit-changes.jpg" alt="commit-changes"></p>
<h3 id="step-3-create-projects">Step 3: Create Projects</h3>
<p>You need to create two projects, such as <code>kubesphere-sample-dev</code> and <code>kubesphere-sample-prod</code>, which represent the development environment and the production environment respectively. Related Deployments and Services of the app will be created automatically in these two projects once the pipeline runs successfully.</p>
<div class="notices note">
  
  <p>Note</p>
  <div>The account <code>project-admin</code> needs to be created in advance since it is the reviewer of the CI/CD Pipeline. See <a href="../../../quick-start/create-workspace-and-project/">Create Workspace, Project, Account and Role</a> for more information.</div>
</div>
<ol>
<li>Use the account <code>project-admin</code> to log in KubeSphere. In the same workspace where you create the DevOps project, create two projects as below. Make sure you invite <code>project-regular</code> to these two projects with the role of <code>operator</code>.</li>
</ol>
<table>
<thead>
<tr>
<th>Project Name</th>
<th>Alias</th>
</tr>
</thead>
<tbody>
<tr>
<td>kubesphere-sample-dev</td>
<td>development environment</td>
</tr>
<tr>
<td>kubesphere-sample-prod</td>
<td>production environment</td>
</tr>
</tbody>
</table>
<ol start="2">
<li>Check the project list. You have two projects and one DevOps project as below:</li>
</ol>
<p><img src="/images/docs/devops-user-guide/create-a-pipeline-using-a-jenkinsfile/project-list.jpg" alt="project-list"></p>
<h3 id="step-4-create-a-pipeline">Step 4: Create a Pipeline</h3>
<ol>
<li>Log out of KubeSphere and log back in as <code>project-regular</code>. Go to the DevOps project <code>demo-devops</code> and click <strong>Create</strong> to build a new pipeline.</li>
</ol>
<p><img src="/images/docs/devops-user-guide/create-a-pipeline-using-a-jenkinsfile/create-pipeline.jpg" alt="create-pipeline"></p>
<ol start="2">
<li>Provide the basic information in the dialogue that appears. Name it <code>jenkinsfile-in-scm</code> and select a code repository.</li>
</ol>
<p><img src="/images/docs/devops-user-guide/create-a-pipeline-using-a-jenkinsfile/create-pipeline-2.jpg" alt="create-pipeline-2"></p>
<ol start="3">
<li>In the tab <strong>GitHub</strong>, click <strong>Get Token</strong> to generate a new GitHub token if you do not have one. Paste the token to the box and click <strong>Confirm</strong>.</li>
</ol>
<p><img src="/images/docs/devops-user-guide/create-a-pipeline-using-a-jenkinsfile/generate-github-token-1.jpg" alt="generate-github-token-1"></p>
<p><img src="/images/docs/devops-user-guide/create-a-pipeline-using-a-jenkinsfile/generate-github-token-2.jpg" alt="generate-github-token-2"></p>
<ol start="4">
<li>Choose your GitHub account. All the repositories related to this token will be listed on the right. Select <strong>devops-java-sample</strong> and click <strong>Select this repo</strong>. Click <strong>Next</strong> to continue.</li>
</ol>
<p><img src="/images/docs/devops-user-guide/create-a-pipeline-using-a-jenkinsfile/select-repo.jpg" alt="select-repo"></p>
<ol start="5">
<li>In <strong>Advanced Settings</strong>, check the box next to <strong>Discard old branch</strong>. In this tutorial, you can use the default value of <strong>Days to keep old branches</strong> and <strong>Maximum number branches to keep</strong>.</li>
</ol>
<p><img src="/images/docs/devops-user-guide/create-a-pipeline-using-a-jenkinsfile/branch-settings.jpg" alt="branch-settings"></p>
<p>Discarding old branches means that you will discard the branch record all together. The branch record includes console output, archived artifacts and other relevant metadata of specific branches. Fewer branches mean that you can save the disk space that Jenkins is using. KubeSphere provides two options to determine when old branches are discarded:</p>
<ul>
<li><strong>Days to keep old branches</strong>. Branches will be discarded after a certain number of days.</li>
<li><strong>Maximum number of branches to keep</strong>. The oldest branches will be discarded after branches reach a certain amount.</li>
</ul>
<div class="notices note">
  
  <p>Note</p>
  <div><strong>Days to keep old branches</strong> and <strong>Maximum number of branches to keep</strong> apply to branches at the same time. As long as a branch meets the condition of either field, it will be discarded. For example, if you specify 2 as the number of retention days and 3 as the maximum number of branches, any branches that exceed either number will be discarded. KubeSphere repopulates these two fields with -1 by default, which means deleted branches will be discarded.</div>
</div>
<ol start="6">
<li>In <strong>Behavioral strategy</strong>, KubeSphere offers three strategies by default. You can delete <strong>Discover PR from Forks</strong> as this strategy will not be used in this example. You do not need to change the setting and can use the default value directly.</li>
</ol>
<p><img src="/images/docs/devops-user-guide/create-a-pipeline-using-a-jenkinsfile/remove-behavioral-strategy.jpg" alt="remove-behavioral-strategy"></p>
<p>As a Jenkins pipeline runs, the Pull Request (PR) submitted by developers will also be regarded as a separate branch.</p>
<p><strong>Discover Branches</strong></p>
<ul>
<li><strong>Exclude branches that are also filed as PRs</strong>. The source branch is not scanned such as the origin&rsquo;s master branch. These branches need to be merged.</li>
<li><strong>Only branches that are also filed as PRs</strong>. Only scan the PR branch.</li>
<li><strong>All branches</strong>. Pull all the branches from the repository origin.</li>
</ul>
<p><strong>Discover PR from Origin</strong></p>
<ul>
<li><strong>Source code version of PR merged with target branch</strong>. A pipeline is created and runs based on the source code after the PR is merged into the target branch.</li>
<li><strong>Source code version of PR itself</strong>. A pipeline is created and runs based on the source code of the PR itself.</li>
<li><strong>Two pipelines are created when a PR is discovered</strong>. KubeSphere creates two pipelines, one based on the source code after the PR is merged into the target branch, and the other based on the source code of the PR itself.</li>
</ul>
<ol start="7">
<li>Scroll down to <strong>Script Path</strong>. The field specifies the Jenkinsfile path in the code repository. It indicates the repository&rsquo;s root directory. If the file location changes, the script path also needs to be changed. Please change it to <code>Jenkinsfile-online</code>, which is the file name of Jenkinsfile in the example repository located in the root directory.</li>
</ol>
<p><img src="/images/docs/devops-user-guide/create-a-pipeline-using-a-jenkinsfile/jenkinsfile-online.jpg" alt="jenkinsfile-online"></p>
<ol start="8">
<li>In <strong>Scan Repo Trigger</strong>, check <strong>If not, scan regularly</strong> and set the interval to <strong>5 minutes</strong>. Click <strong>Create</strong> to finish.</li>
</ol>
<p><img src="/images/docs/devops-user-guide/create-a-pipeline-using-a-jenkinsfile/advanced-setting.jpg" alt="advanced-setting"></p>
<div class="notices note">
  
  <p>Note</p>
  <div>You can set a specific interval to allow pipelines to scan remote repositories, so that any code updates or new PRs can be detected based on the strategy you set in <strong>Behavioral strategy</strong>.</div>
</div>
<h3 id="step-5-run-a-pipeline">Step 5: Run a Pipeline</h3>
<ol>
<li>After a pipeline is created, it displays in the list below. Click it to go to its detail page.</li>
</ol>
<p><img src="/images/docs/devops-user-guide/create-a-pipeline-using-a-jenkinsfile/pipeline-list.jpg" alt="pipeline-list"></p>
<ol start="2">
<li>Under <strong>Activity</strong>, three branches are being scanned. Click <strong>Run</strong> on the right and the pipeline runs based on the behavioral strategy you set. Select <strong>sonarqube</strong> from the drop-down list and add a tag number such as <code>v0.0.2</code>. Click <strong>OK</strong> to trigger a new activity.</li>
</ol>
<p><img src="/images/docs/devops-user-guide/create-a-pipeline-using-a-jenkinsfile/pipeline-detail.jpg" alt="pipeline-detail"></p>
<p><img src="/images/docs/devops-user-guide/create-a-pipeline-using-a-jenkinsfile/tag-name.jpg" alt="tag-name"></p>
<div class="notices note">
  
  <p>Note</p>
  <div><ul>
<li>If you do need see any activity on this page, you need to refresh your browser manually or click <strong>Scan Repository</strong> from the drop-down menu (the <strong>More</strong> button).</li>
<li>The tag name is used to generate releases and images with the tag in GitHub and Docker Hub. An existing tag name cannot be used again for the field TAG_NAME. Otherwise, the pipeline will not be running successfully.</li>
</ul>
</div>
</div>
<ol start="3">
<li>Wait for a while and you can see some activities stop and some fail. Click the first one to view details.</li>
</ol>
<p><img src="/images/docs/devops-user-guide/create-a-pipeline-using-a-jenkinsfile/activity-failure.jpg" alt="activity-failure"></p>
<div class="notices note">
  
  <p>Note</p>
  <div>Activity failures may be caused by different factors. In this example, only the Jenkinsfile of the branch sonarqube is changed as you edit the environment variables in it in the steps above. On the contrary, these variables in the dependency and master branch remain changed (namely, wrong GitHub and Docker Hub account), resulting in the failure. You can click it and inspect its logs to see details. Other reasons for failures may be network issues, incorrect coding in the Jenkinsfile and so on.</div>
</div>
<ol start="4">
<li>The pipeline pauses at the stage <code>deploy to dev</code>. You need to click <strong>Proceed</strong> manually. Note that the pipeline will be reviewed three times as <code>deploy to dev</code>, <code>push with tag</code>, and <code>deploy to production</code> are defined in the Jenkinsfile respectively.</li>
</ol>
<p><img src="/images/docs/devops-user-guide/create-a-pipeline-using-a-jenkinsfile/pipeline-proceed.jpg" alt="pipeline-proceed"></p>
<p>In a development or production environment, it requires someone who has higher authority (e.g. release manager) to review the pipeline, images, as well as the code analysis result. They have the authority to determine whether the pipeline can go to the next stage. In the Jenkinsfile, you use the section <code>input</code> to specify who reviews the pipeline. If you want to specify a user (e.g. <code>project-admin</code>) to review it, you can add a field in the Jenkinsfile. If there are multiple users, you need to use commas to separate them as follows:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-groovy" data-lang="groovy"><span style="color:#960050;background-color:#1e0010">···</span>
input<span style="color:#f92672">(</span>id: <span style="color:#e6db74">&#39;release-image-with-tag&#39;</span><span style="color:#f92672">,</span> message: <span style="color:#e6db74">&#39;release image with tag?&#39;</span><span style="color:#f92672">,</span> submitter: <span style="color:#e6db74">&#39;project-admin,project-admin1&#39;</span><span style="color:#f92672">)</span>
<span style="color:#960050;background-color:#1e0010">···</span>
</code></pre></div><h3 id="step-6-check-pipeline-status">Step 6: Check Pipeline Status</h3>
<ol>
<li>In <strong>Task Status</strong>, you can see how a pipeline is running. Please note that the pipeline will keep initializing for several minutes after it is just created. There are eight stages in the sample pipeline and they have been defined separately in <a href="https://github.com/kubesphere/devops-java-sample/blob/sonarqube/Jenkinsfile-online" target="_blank" rel="noopener noreferrer">Jenkinsfile-online</a>.</li>
</ol>
<p><img src="/images/docs/devops-user-guide/create-a-pipeline-using-a-jenkinsfile/inspect-pipeline-log-1.jpg" alt="inspect-pipeline-log-1"></p>
<ol start="2">
<li>Check the pipeline running logs by clicking <strong>Show Logs</strong> in the top right corner. You can see the dynamic log output of the pipeline, including any errors that may stop the pipeline from running. For each stage, you click it to inspect logs, which can be downloaded to your local machine for further analysis.</li>
</ol>
<p><img src="/images/docs/devops-user-guide/create-a-pipeline-using-a-jenkinsfile/inspect-pipeline-log-2.jpg" alt="inspect-pipeline-log-2"></p>
<h3 id="step-7-verify-results">Step 7: Verify Results</h3>
<ol>
<li>Once you successfully executed the pipeline, click <strong>Code Quality</strong> to check the results through  SonarQube as follows.</li>
</ol>
<p><img src="/images/docs/devops-user-guide/integrate-sonarqube-into-pipeline/sonarqube-result-detail-1.jpg.jpg" alt="sonarqube-result-detail-1.jpg"></p>
<p><img src="/images/docs/devops-user-guide/integrate-sonarqube-into-pipeline/sonarqube-result-detail.jpg" alt="sonarqube-result-detail"></p>
<ol start="2">
<li>The Docker image built through the pipeline has also been successfully pushed to Docker Hub, as it is  defined in the Jenkinsfile. In Docker Hub, you will find the image with the tag <code>v0.0.2</code> that is specified before the pipeline runs.</li>
</ol>
<p><img src="/images/docs/devops-user-guide/integrate-sonarqube-into-pipeline/docker-hub-result.jpg" alt="docker-hub-result"></p>
<ol start="3">
<li>At the same time, a new tag and a new release have been generated in GitHub.</li>
</ol>
<p><img src="/images/docs/devops-user-guide/integrate-sonarqube-into-pipeline/github-result.jpg" alt="github-result"></p>
<ol start="4">
<li>The sample application will be deployed to <code>kubesphere-sample-dev</code> and <code>kubesphere-sample-prod</code> with  corresponding Deployments and Services created. Go to these two projects and here are the expected result:</li>
</ol>
<table>
<thead>
<tr>
<th align="left">Environment</th>
<th align="left">URL</th>
<th align="left">Namespace</th>
<th align="left">Deployment</th>
<th align="left">Service</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">Development</td>
<td align="left"><code>http://{NodeIP}:{$30861}</code></td>
<td align="left">kubesphere-sample-dev</td>
<td align="left">ks-sample-dev</td>
<td align="left">ks-sample-dev</td>
</tr>
<tr>
<td align="left">Production</td>
<td align="left"><code>http://{$NodeIP}:{$30961}</code></td>
<td align="left">kubesphere-sample-prod</td>
<td align="left">ks-sample</td>
<td align="left">ks-sample</td>
</tr>
</tbody>
</table>
<h4 id="deployments">Deployments</h4>
<p><img src="/images/docs/devops-user-guide/integrate-sonarqube-into-pipeline/pipeline-deployments.jpg" alt="pipeline-deployments"></p>
<h4 id="services">Services</h4>
<p><img src="/images/docs/devops-user-guide/integrate-sonarqube-into-pipeline/devops-prod.jpg" alt="devops-prod"></p>
<div class="notices note">
  
  <p>Note</p>
  <div>You may need to open the port in your security groups so that you can access the app with the URL.</div>
</div>
<h3 id="step-8-access-sample-service">Step 8: Access Sample Service</h3>
<ol>
<li>To access the service, log in KubeSphere as <code>admin</code> to use the <strong>web kubectl</strong> from <strong>Toolbox</strong>. Go to the project <code>kubesphere-sample-dev</code>, and select <code>ks-sample-dev</code> in <strong>Services</strong> under <strong>Application Workloads</strong>. The endpoint can be used to access the service.</li>
</ol>
<p><img src="/images/docs/devops-user-guide/integrate-sonarqube-into-pipeline/sample-app-result-check.jpg" alt="sample-app-result-check"></p>
<p><img src="/images/docs/devops-user-guide/integrate-sonarqube-into-pipeline/access-endpoint.jpg" alt="access-endpoint"></p>
<ol start="2">
<li>Use the <strong>web kubectl</strong> from <strong>Toolbox</strong> in the bottom right corner by executing the following command:</li>
</ol>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ curl 10.10.128.169:8080
</code></pre></div><ol start="3">
<li>Expected output:</li>
</ol>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">Really appreciate your star, that<span style="color:#960050;background-color:#1e0010">&#39;</span>s the power of our life.
</code></pre></div><div class="notices note">
  
  <p>Note</p>
  <div>Use <code>curl</code> endpoints or {$Virtual IP}:{$Port} or {$Node IP}:{$NodePort}</div>
</div>
<ol start="4">
<li>Similarly, you can test the service in the project <code>kubesphere-sample-prod</code> and you will see the same result.</li>
</ol>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ curl 10.10.128.170:8080
Really appreciate your star, that<span style="color:#960050;background-color:#1e0010">&#39;</span>s the power of our life.
</code></pre></div>
                    </div>
                </div>
                
                
                <div class="page-div common-flex-layout">
                    
                    
                        <a class="last" href="/website/docs/access-control-and-account-management/configuring-authentication/">
                            <img src="/images/docs/last.svg" alt="Previous">
                            Previous
                            <span>: Configure Authentication</span>
                        </a>
                    
                    
                    
                    
                        <a class="next" href="/website/docs/devops-user-guide/how-to-integrate/sonarqube/">
                            Next
                            <span>: Integrate SonarQube into Pipeline</span>
                            <img src="/images/docs/next.svg" alt="Next">
                        </a>            
                    
                    
                </div>
                
                <div></div>
            </div>
            
            <div class="aside">
                <div class="inner-div">
                    <div class='title'>
                        What’s on this Page
                    </div>
                    <div class='tabs'>
                        <nav id="TableOfContents">
  <ul>
    <li><a href="#prerequisites">Prerequisites</a></li>
    <li><a href="#pipeline-overview">Pipeline Overview</a></li>
    <li><a href="#hands-on-lab">Hands-on Lab</a>
      <ul>
        <li><a href="#step-1-create-credentials">Step 1: Create Credentials</a></li>
        <li><a href="#step-2-modify-jenkinsfile-in-github-repository">Step 2: Modify Jenkinsfile in GitHub Repository</a></li>
        <li><a href="#step-3-create-projects">Step 3: Create Projects</a></li>
        <li><a href="#step-4-create-a-pipeline">Step 4: Create a Pipeline</a></li>
        <li><a href="#step-5-run-a-pipeline">Step 5: Run a Pipeline</a></li>
        <li><a href="#step-6-check-pipeline-status">Step 6: Check Pipeline Status</a></li>
        <li><a href="#step-7-verify-results">Step 7: Verify Results</a></li>
        <li><a href="#step-8-access-sample-service">Step 8: Access Sample Service</a></li>
      </ul>
    </li>
  </ul>
</nav>
                    </div>
                </div>
            </div>
            
        </div>
    </section>
    
    
    <script type="text/javascript" src="/website/js/aside.34d4ca232760855916fede489417772adb45cdceab8541c6f6826e5d83a0b68e071a44f76a077fe90e39afe213cc1aab40272900f7cbdffb45068c7746c7b183.js" integrity="sha512-NNTKIydghVkW/t5IlBd3KttFzc6rhUHG9oJuXYOgto4HGkT3agd/6Q45r&#43;ITzBqrQCcpAPfL3/tFBox3Rsexgw=="></script>
    
    
    
    <script type="text/javascript" src="/website/js/markdown-tab.224c8a343197870e80877ad07e19b932b807d3fde3abccde667f2156378cb00497ebb11d2f872f09ea91e7282e87655f8cb4ef163da46e34d00dca44dbf52aad.js" integrity="sha512-IkyKNDGXhw6Ah3rQfhm5MrgH0/3jq8zeZn8hVjeMsASX67EdL4cvCeqR5yguh2VfjLTvFj2kbjTQDcpE2/UqrQ=="></script>
    
    <script>
        var languageCode = 'en'
        var filePath = 'docs\\devops-user-guide\\how-to-use\\create-a-pipeline-using-jenkinsfile.md'
        var githubUrl = 'https:\/\/github.com\/cnimages\/website'
        
    
        var getLatestTime = function(data) {
            var commit = data[0].commit
            return commit.author.date.replace("T", " ").replace("Z", "")
        }
    
        var filterData = function(data) {
            var arr = []
            var length = data.length
            for (var i = 0; i < length; i++) {
                var author = data[i].author
                if (author) {
                    var avatar_url = author.avatar_url
                    if (avatar_url && !arr.includes(avatar_url)) {
                        arr.push(avatar_url)
                    }
                }
    
            }
            return arr
        }
        var getFileContributors = function() {
            var url = 'https://api.github.com/repos/kubesphere/website/commits?path=content/' + languageCode + '/' + filePath
            $.getJSON(url, function(data) {
                if (!data || data.length === 0) {
                    $('.contributor-div').hide()
                    return
                }
                var newData = filterData(data)
                var time = getLatestTime(data)
                renderLatestTime(time)
                renderContributors(newData)
            })
        }
        var renderContributors = function(data) {
            var contributor = $('.contributor-avatar')
            var length = data.length
            var len = 5
            $.each(data.slice(0, len), function(index, item) {
                var img = $("<img />", {
                    "src": item
                })
                $("<li />", {
                    "html": img
                }).appendTo(contributor);
            });
            var t = length - len
            if (t > 0) {
                $('.more-contributor').html('+' + t)
            }
        }
    
        var renderLatestTime = function(time) {
            $('.update-time').html(time)
        }
    
        var bindClickMenu = function() {
            var sectionMenu = $(".section-menu")
            $('.section-control').on('click', function(e){
                if (sectionMenu.is(":hidden")) {
                    sectionMenu.show();
                } else {
                    sectionMenu.hide()
                }
    
                $(document).one("click", function(){
                    sectionMenu.hide()
                });
    
                e.stopPropagation()
            })
    
            sectionMenu.on("click", function(e){
                e.stopPropagation();
            })
        }
    
        var bindClickSecondMenu = function() {
            var sectionMenu = $(".section-2 .left-div")
            $('.second-section-menu').on('click', function(e){
                sectionMenu.css("left", "0")
    
                $(document).one("click", function(){
                    sectionMenu.css("left", "-274px")
                });
    
                e.stopPropagation()
            })
    
            sectionMenu.on("click", function(e){
                e.stopPropagation();
            })
        }
    
        var useViewer = function() {
            var viewer = new Viewer(document.querySelector('.md-body'), {
                url: 'src'
            })
        }
    
        var __main = function() {
            getFileContributors()
            bindClickMenu()
            bindClickSecondMenu()
            useViewer()
        }
    
        __main()
    
    </script>
</main>

<footer>
    <div class="down-main">
        <div class='img-div'>
            <a class='wechat' href="javascript:void(0);">
                <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="28" height="28" viewBox="0 0 28 28">
    <defs>
        <path id="a" d="M0 0h15.673v12.156H0z"/>
    </defs>
    <g fill="none" fill-rule="evenodd" transform="translate(1 1)">
        <circle cx="13" cy="13" r="13" stroke="#B6C2CD"/>
        <g transform="translate(5 7)">
            <mask id="b" fill="#fff">
                <use xlink:href="#a"/>
            </mask>
            <path fill="currentColor" d="M15.673 7.898c0-2.061-2.173-3.74-4.619-3.74-2.59 0-4.625 1.679-4.625 3.74 0 2.066 2.035 3.738 4.625 3.738.542 0 1.09-.13 1.632-.256l1.493.776-.408-1.29c1.09-.776 1.902-1.81 1.902-2.968zm-6.119-.645c-.27 0-.541-.257-.541-.514 0-.256.27-.514.541-.514.41 0 .681.258.681.514 0 .257-.271.514-.681.514zm2.994 0c-.27 0-.541-.257-.541-.514 0-.256.27-.514.54-.514.41 0 .681.258.681.514 0 .257-.277.514-.68.514z" mask="url(#b)"/>
            <path fill="currentColor" d="M10.602 3.674c.177 0 .356.011.533.029C10.657 1.576 8.27 0 5.543 0 2.498 0 0 1.974 0 4.485c0 1.45.829 2.64 2.216 3.564l-.552 1.588 1.94-.929c.693.129 1.251.263 1.94.263.17 0 .343-.005.515-.022a3.68 3.68 0 0 1-.172-1.104c0-2.302 2.081-4.171 4.715-4.171zM7.618 2.243c.417 0 .693.263.693.66s-.276.66-.693.66c-.418 0-.835-.263-.835-.66.006-.398.423-.66.835-.66zm-3.88 1.319c-.417 0-.834-.263-.834-.66s.417-.66.834-.66c.418 0 .695.263.695.66 0 .392-.277.66-.695.66z" mask="url(#b)"/>
        </g>
    </g>
</svg>

                <div class="hide-div">
                    <p>Follow the official account</p>
                    <img src="/images/footer/wechat_code.svg" alt="">
                </div>
            </a>
            <a class='facebook-a' href="https://www.facebook.com/kubesphere" target="_blank"></a>
            <a class='twitter-a' href="https://twitter.com/KubeSphere" target="_blank" rel="noopener noreferrer"></a>
            <a class='linkedin-a' href="https://www.linkedin.com/company/kubesphere/" target="_blank" rel="noopener noreferrer"></a>
            <a class='youtube-a' href="https://www.youtube.com/channel/UCyTdUQUYjf7XLjxECx63Hpw" target="_blank" rel="noopener noreferrer"></a>
            <a class='slack-a' href="https://join.slack.com/t/kubesphere/shared_invite/enQtNTE3MDIxNzUxNzQ0LTZkNTdkYWNiYTVkMTM5ZThhODY1MjAyZmVlYWEwZmQ3ODQ1NmM1MGVkNWEzZTRhNzk0MzM5MmY4NDc3ZWVhMjE" target="_blank" rel="noopener noreferrer"></a>
            <a class='github-a' href="https://github.com/cnimages/kubesphere" target="_blank" rel="noopener noreferrer"></a>
            <a class='medium-a' href="https://itnext.io/@kubesphere" target="_blank" rel="noopener noreferrer"></a>
        </div>
        <p class='p1'>KubeSphere®️ 2020 All Rights Reserved.</p>
    </div>
</footer>
</body>

</html>